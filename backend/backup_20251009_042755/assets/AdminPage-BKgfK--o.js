import{j as e,i as t,r,C as n,d as i,U as o,f as a,o as s,s as l,t as c,T as u,P as d,u as f,L as h,v as p,w as m,q as g,x as y,y as b,z as v,B as x,E as j,G as I,J as w,K as N,e as _,N as k,S as A,V as C,A as O,O as E,Q as S,M as T}from"./icons-BXkF1GlC.js";import{r as P,u as q,b as L,A as M,R as D,a as R,I as B,M as F,c as U,S as z,V as H}from"./index-DR-jqubb.js";import{c as V,r as K,a as $,g as G}from"./vendor-eVk5PToZ.js";const W=({onSuccess:t})=>{const[r,n]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(!1),{login:l}=q(),{addToast:c}=L();return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-0 text-3xl font-extrabold text-gray-900",children:"Espace Administration"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Connectez-vous pour gérer le site"})]}),e.jsxs("form",{className:"mt-6 space-y-6",onSubmit:async e=>{if(e.preventDefault(),r&&i){s(!0);try{await l(r,i)?(c("Connexion réussie","success"),null==t||t()):c("Nom ou mot de passe incorrect","error")}catch(n){c("Erreur lors de la connexion","error")}finally{s(!1)}}else c("Veuillez remplir tous les champs","error")},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom d'utilisateur"}),e.jsx("input",{id:"nom",name:"nom",type:"text",autoComplete:"username",required:!0,value:r,onChange:e=>n(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm",placeholder:"",disabled:a})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:i,onChange:e=>o(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 text-gray-900 rounded-md focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm",placeholder:"",disabled:a})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Connexion en cours..."]}):"Connexion"})})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{type:"button",onClick:()=>{window.location.hash="#"},className:"text-sm text-green-600 hover:text-green-700",children:"Retour au site"})})]})})},J=({children:t})=>{const{isAuthenticated:r,isLoading:n}=q();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Vérification de l'authentification..."})]})}):r?e.jsx(e.Fragment,{children:t}):e.jsx(W,{})},Z=({activeRoute:n,onLogout:i,isOpen:o,onClose:a})=>e.jsxs("aside",{className:"bg-gray-800 text-gray-300 flex flex-col w-64 flex-shrink-0 fixed inset-y-0 left-0 z-40 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 "+(o?"translate-x-0":"-translate-x-full"),children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-700",children:[e.jsx("div",{className:"text-white font-bold text-xl",children:"AGRIA ADMIN"}),e.jsx("button",{onClick:a,className:"lg:hidden text-gray-400 hover:text-white","aria-label":"Fermer le menu",children:e.jsx(t,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1",children:M.map(t=>{const r=n.startsWith(t.href);return e.jsxs("a",{href:t.href,onClick:e=>((e,t)=>{e.preventDefault(),window.location.hash=t,a()})(e,t.href),className:"flex items-center p-2 rounded-md transition-colors "+(r?"bg-agria-green text-white font-semibold":"hover:bg-gray-700 hover:text-white"),children:[e.jsx(t.icon,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:t.name})]},t.name)})}),e.jsxs("div",{className:"px-2 py-4 border-t border-gray-700",children:[e.jsxs("a",{href:"#",onClick:e=>{e.preventDefault(),window.location.hash="#"},className:"flex items-center p-2 rounded-md hover:bg-gray-700 hover:text-white",children:[e.jsx(r,{}),e.jsx("span",{className:"ml-3",children:"Retour au site"})]}),e.jsxs("button",{onClick:i,className:"w-full flex items-center p-2 mt-2 rounded-md text-red-400 hover:bg-red-500 hover:text-white",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),e.jsx("span",{children:"Déconnexion"})]})]})]}),Y=({title:t,value:r,icon:n,href:i})=>e.jsx("a",{href:i,onClick:e=>((e,t)=>{e.preventDefault(),window.location.hash=t})(e,i),className:"bg-white p-6 rounded-lg shadow-md hover:shadow-lg hover:border-agria-green border-2 border-transparent transition-all transform hover:-translate-y-1",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-agria-green-dark text-white rounded-full mr-4",children:n}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:r})]})]})}),Q=e=>{const t=new Date,r=Math.floor((t.getTime()-e.getTime())/1e3);let n=r/31536e3;return n>1?`il y a ${Math.floor(n)} an(s)`:(n=r/2592e3,n>1?`il y a ${Math.floor(n)} mois`:(n=r/86400,n>1?`il y a ${Math.floor(n)} jour(s)`:(n=r/3600,n>1?`il y a ${Math.floor(n)} heure(s)`:(n=r/60,n>1?`il y a ${Math.floor(n)} minute(s)`:"à l'instant"))))},X=()=>{const[t,r]=P.useState("Non défini"),[s]=P.useState((()=>{const e=new Date;return[{id:"2",category:"Menu",description:"Le menu de la semaine a été sauvegardé.",user:"Admin",timestamp:new Date(e.getTime()-15e5),icon:n},{id:"3",category:"Messages",description:"Nouveau message reçu de Bob Dubois.",user:"Bob Dubois",timestamp:new Date(e.getTime()-36e5),icon:i},{id:"4",category:"Utilisateurs",description:'Le statut de Bob Dubois est passé à "En attente".',user:"Admin",timestamp:new Date(e.getTime()-72e5),icon:o},{id:"6",category:"Menu",description:"Génération d'un nouveau menu par l'IA.",user:"Admin",timestamp:new Date(e.getTime()-288e5),icon:n},{id:"7",category:"Paramètres",description:"Les informations du restaurant ont été mises à jour.",user:"Admin",timestamp:new Date(e.getTime()-864e5),icon:a},{id:"8",category:"Utilisateurs",description:"L'utilisateur Fiona Garcia a été ajouté.",user:"Admin",timestamp:new Date(e.getTime()-1008e5),icon:o}].sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime())})()),[l,c]=P.useState("Tout");P.useEffect(()=>{const e=localStorage.getItem("weeklyMenu");r(e?"Publié":"Non généré")},[]);const u=P.useMemo(()=>"Tout"===l?s:s.filter(e=>e.category===l),[s,l]);return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-6",children:"Tableau de bord"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(Y,{title:"Statut du Menu",value:t,icon:e.jsx(n,{className:"h-6 w-6"}),href:"#admin/menu"})}),e.jsxs("div",{className:"mt-10 bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Accès Rapides"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("a",{href:"#admin/menu",onClick:e=>{e.preventDefault(),window.location.hash="#admin/menu"},className:"bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-4 rounded transition-colors",children:"Gérer le Menu"}),e.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),window.location.hash="#"},className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition-colors",children:"Voir le site public"})]})]}),e.jsxs("div",{className:"mt-10 bg-white p-6 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:"Activités récentes du site"}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:["Tout","Menu","Utilisateurs","Messages","Paramètres"].map(t=>e.jsx("button",{onClick:()=>c(t),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors "+(l===t?"border-agria-green text-agria-green-dark":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:t},t))})}),e.jsx("ul",{className:"mt-4 space-y-2 max-h-96 overflow-y-auto pr-2",children:u.length>0?u.map(t=>e.jsxs("li",{className:"flex items-start space-x-4 p-3 rounded-lg hover:bg-gray-50",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("span",{className:"h-10 w-10 rounded-full flex items-center justify-center bg-gray-100 text-agria-green",children:e.jsx(t.icon,{className:"h-5 w-5"})})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-sm text-gray-800",children:t.description}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t.user&&`par ${t.user} • `,Q(t.timestamp)]})]})]},t.id)):e.jsx("li",{className:"text-center text-gray-500 py-10",children:"Aucune activité dans cette catégorie."})})]})]})},ee="weeklyMenu",te=({isOpen:r,onClose:n,onSave:i,currentImage:o})=>{const[a,s]=P.useState("upload"),[l,c]=P.useState(""),[u,d]=P.useState(o||null),p=D.useRef(null),{addToast:m}=L();P.useEffect(()=>{d(o||null),o&&!o.startsWith("data:")?(c(o),s("url")):(c(""),s("upload"))},[r,o]);return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:n,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Gérer l'image"}),e.jsx("button",{onClick:n,children:e.jsx(t,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex border-b mb-4",children:[e.jsxs("button",{onClick:()=>s("upload"),className:"py-2 px-4 flex items-center gap-2 "+("upload"===a?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"),children:[e.jsx(f,{className:"h-5 w-5"})," Importer"]}),e.jsxs("button",{onClick:()=>s("url"),className:"py-2 px-4 flex items-center gap-2 "+("url"===a?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"),children:[e.jsx(h,{className:"h-5 w-5"})," Lien URL"]})]}),"upload"===a?e.jsx("div",{children:e.jsx("input",{type:"file",ref:p,onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>2097152)return void m("L'image est trop lourde (max 2 Mo).","error");const r=new FileReader;r.onloadend=()=>d(r.result),r.readAsDataURL(t)}},accept:"image/*",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}):e.jsx("div",{children:e.jsx("input",{type:"url",value:l,onChange:e=>c(e.target.value),onBlur:()=>{l.match(/\.(jpeg|jpg|gif|png|webp)$/)&&d(l)},placeholder:"https://exemple.com/image.jpg",className:"w-full p-2 border border-gray-300 rounded"})}),e.jsx("div",{className:"mt-4 w-full h-40 bg-gray-100 rounded border flex items-center justify-center",children:u?e.jsx("img",{src:u,alt:"Aperçu",className:"max-h-full max-w-full object-contain"}):e.jsx("span",{className:"text-gray-400",children:"Aperçu"})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 flex justify-between rounded-b-lg",children:[e.jsx("button",{onClick:()=>{i(null),n()},className:"text-red-600 hover:text-red-800 font-semibold",children:"Supprimer l'image"}),e.jsxs("div",{children:[e.jsx("button",{onClick:n,className:"py-2 px-4 rounded font-semibold mr-2",children:"Annuler"}),e.jsx("button",{onClick:()=>{i("url"===a?l:u),n()},className:"bg-blue-600 text-white py-2 px-4 rounded font-semibold hover:bg-blue-700",children:"Valider"})]})]})]})}):null},re=()=>{const[t,r]=P.useState(null),[n,i]=P.useState(!0),[o,a]=P.useState(null),h=["LUNDI","MARDI","MERCREDI","JEUDI","VENDREDI"],{addToast:p}=L(),m=D.useRef(null),g=P.useCallback(async()=>{i(!0);try{const e=await R.getMenu();if(e)Object.values(e).forEach(e=>{e.forEach(e=>{e.items&&e.items.forEach(e=>{e.id||(e.id=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`)})})}),r(e),p("Menu chargé depuis la base de données.","success");else{const e=localStorage.getItem(ee);if(e){let t=JSON.parse(e);Object.values(t).forEach(e=>{e.forEach(e=>{e.items&&e.items.forEach(e=>{e.id||(e.id=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`)})})}),r(t),p("Menu chargé depuis le cache local.","info")}else r(null)}}catch(e){p("Erreur lors du chargement du menu. Utilisation du cache local.","error");try{const e=localStorage.getItem(ee);if(e){let t=JSON.parse(e);Object.values(t).forEach(e=>{e.forEach(e=>{e.items&&e.items.forEach(e=>{e.id||(e.id=`item-${Date.now()}-${Math.random().toString(36).substr(2,9)}`)})})}),r(t)}else r(null)}catch(t){p("Erreur lors du chargement du menu.","error"),r(null)}}finally{i(!1)}},[p]);P.useEffect(()=>{g()},[g]);const y=()=>{const e={};h.forEach(t=>{e[t]=[{title:"ENTRÉES",items:[]},{title:"PLATS",items:[]},{title:"LÉGUMES",items:[]},{title:"DESSERTS",items:[]}]}),r(e),p("Menu vierge créé. Vous pouvez commencer à le remplir.","info")},b=e=>{var t;const n=null==(t=e.target.files)?void 0:t[0];if(!n)return;const i=new FileReader;i.onload=e=>{var t;try{const n=null==(t=e.target)?void 0:t.result,i=JSON.parse(n);if("object"!=typeof i||null===i||!h.every(e=>e in i))throw new Error("Format de fichier JSON invalide.");r(i),p("Menu importé avec succès !","success")}catch(n){p("Échec de l'importation. Le fichier est peut-être corrompu ou mal formaté.","error")}},i.readAsText(n),e.target.value=""},v=(null==o?void 0:o.isOpen)&&t?t[o.day][o.catIndex].items[o.itemIndex]:void 0;return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[e.jsx("h1",{className:"text-4xl font-bold font-serif text-gray-800",children:"Gestion du Menu de la Semaine"}),t&&e.jsx("div",{className:"flex flex-wrap gap-4",children:e.jsx("button",{onClick:async()=>{if(t){const n=JSON.parse(JSON.stringify(t));Object.keys(n).forEach(e=>{n[e].forEach(e=>{e.items=e.items.filter(e=>""!==e.name.trim())})});try{await R.saveMenu(n),r(n),p("Menu sauvegardé avec succès dans la base de données ! Il est maintenant visible sur le site public.","success"),localStorage.setItem(ee,JSON.stringify(n))}catch(e){p("Erreur lors de la sauvegarde dans la base de données. Sauvegarde locale effectuée.","error"),localStorage.setItem(ee,JSON.stringify(n)),r(n)}}},className:"bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-6 rounded-lg transition-colors shadow-md transform hover:scale-105",children:"Sauvegarder et Publier"})})]}),n?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(s,{size:"large"})}):t?e.jsx("div",{className:"space-y-8",children:t&&h.map(n=>{var i;return e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-agria-green mb-4 border-b-2 border-agria-green pb-2",children:n}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:null==(i=t[n])?void 0:i.map((t,i)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-bold text-lg text-gray-700 uppercase",children:t.title}),e.jsx("button",{onClick:()=>((e,t)=>{r(r=>{if(!r)return null;const n=JSON.parse(JSON.stringify(r));return n[e][t].items.push({id:`new-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:"",image:void 0}),n})})(n,i),className:"text-agria-green hover:text-agria-green-dark",title:"Ajouter un plat",children:e.jsx(l,{className:"h-7 w-7"})})]}),e.jsxs("div",{className:"space-y-2",children:[t.items.map((t,o)=>e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md bg-white focus-within:ring-2 focus-within:ring-agria-green transition-all duration-200 overflow-hidden",children:[e.jsx("button",{onClick:()=>a({isOpen:!0,day:n,catIndex:i,itemIndex:o}),className:"flex-shrink-0 cursor-pointer w-10 h-10 flex items-center justify-center text-gray-400 hover:bg-gray-100 transition-colors",children:t.image?e.jsx("img",{src:t.image,alt:t.name||"Menu item",className:"w-full h-full object-cover"}):e.jsx(c,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",value:t.name,onChange:e=>((e,t,n,i)=>{r(r=>{if(!r)return null;const o=JSON.parse(JSON.stringify(r));return o[e][t].items[n].name=i,o})})(n,i,o,e.target.value),className:"w-full px-2 py-2 border-0 bg-transparent focus:ring-0 text-sm",placeholder:"Nouveau plat..."}),e.jsx("button",{onClick:()=>((e,t,n)=>{window.confirm("Êtes-vous sûr de vouloir supprimer cet élément ?")&&r(r=>{if(!r)return null;const i=JSON.parse(JSON.stringify(r));return i[e][t].items=i[e][t].items.filter((e,t)=>t!==n),i})})(n,i,o),className:"p-2 text-gray-500 hover:text-red-600",title:"Supprimer",children:e.jsx(u,{className:"h-5 w-5"})})]},t.id)),0===t.items.length&&e.jsx("p",{className:"text-sm text-gray-400 italic px-2",children:"Aucun plat."})]})]},t.title))})]},n)})}):e.jsxs("div",{className:"text-center p-10 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Aucun menu n'est actuellement défini."}),e.jsx("p",{className:"text-gray-500 mt-2 mb-6",children:"Choisissez une option pour commencer."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsxs("button",{onClick:y,className:"bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-3 shadow-md",children:[e.jsx(d,{}),"Créer un menu vierge"]}),e.jsxs("button",{onClick:()=>{var e;return null==(e=m.current)?void 0:e.click()},className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-3 shadow-md",children:[e.jsx(f,{}),"Importer (JSON)"]}),e.jsx("input",{type:"file",ref:m,className:"hidden",accept:".json",onChange:b})]})]}),e.jsx(te,{isOpen:!!(null==o?void 0:o.isOpen),onClose:()=>a(null),onSave:e=>{if(!o)return;const{day:t,catIndex:n,itemIndex:i}=o;r(r=>{if(!r)return null;const o=JSON.parse(JSON.stringify(r));return o[t][n].items[i].image=null===e?void 0:e,o}),a(null)},currentImage:null==v?void 0:v.image})]})},ne=[{id:1,name:"Alice Martin",email:"alice.martin@example.com",company:"Société A",status:"Actif",creationDate:"2023-10-26"},{id:2,name:"Bob Dubois",email:"bob.dubois@example.com",company:"Entreprise B",status:"En attente",creationDate:"2023-10-25"},{id:3,name:"Charlie Durand",email:"charlie.durand@example.com",company:"Société A",status:"Actif",creationDate:"2023-10-24"},{id:4,name:"Diane Petit",email:"diane.petit@example.com",company:"Organisation C",status:"Bloqué",creationDate:"2023-10-23"},{id:5,name:"Ethan Lefebvre",email:"ethan.lefebvre@example.com",company:"Entreprise B",status:"Actif",creationDate:"2023-10-22"},{id:6,name:"Fiona Garcia",email:"fiona.garcia@example.com",company:"Société A",status:"En attente",creationDate:"2023-10-21"}],ie=({status:t})=>e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${{Actif:"bg-green-100 text-green-800","En attente":"bg-yellow-100 text-yellow-800","Bloqué":"bg-red-100 text-red-800"}[t]}`,children:t}),oe=({user:t,onSave:r,onClose:n})=>{const[i,o]=P.useState(t);P.useEffect(()=>{o(t)},[t]);const a=e=>{const{name:t,value:r}=e.target;o(e=>({...e,[t]:r}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 transition-opacity","aria-modal":"true",role:"dialog",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg transform transition-all",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(i)},children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:[t.id?"Modifier":"Ajouter"," un utilisateur"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),e.jsx("input",{type:"text",name:"name",id:"name",value:i.name||"",onChange:a,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-agria-green focus:border-agria-green"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse e-mail"}),e.jsx("input",{type:"email",name:"email",id:"email",value:i.email||"",onChange:a,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-agria-green focus:border-agria-green"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700",children:"Entreprise"}),e.jsx("input",{type:"text",name:"company",id:"company",value:i.company||"",onChange:a,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-agria-green focus:border-agria-green"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Statut"}),e.jsxs("select",{name:"status",id:"status",value:i.status||"Actif",onChange:a,required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-agria-green focus:border-agria-green sm:text-sm rounded-md",children:[e.jsx("option",{children:"Actif"}),e.jsx("option",{children:"En attente"}),e.jsx("option",{children:"Bloqué"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse rounded-b-lg",children:[e.jsx("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-agria-green text-base font-medium text-white hover:bg-agria-green-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-agria-green sm:ml-3 sm:w-auto sm:text-sm",children:"Sauvegarder"}),e.jsx("button",{type:"button",onClick:n,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Annuler"})]})]})})})},ae=()=>{const[t,r]=P.useState([]),[n,i]=P.useState(""),[o,a]=P.useState("Tous"),[s,l]=P.useState(!0),[c,u]=P.useState(!1),[d,f]=P.useState(null),{addToast:h}=L();P.useEffect(()=>{p()},[]);const p=async()=>{l(!0);try{const e=await R.getUsers();e.users?r(e.users):(r(ne),h("Utilisation des données de démonstration (API non disponible)","info"))}catch(e){r(ne),h("Erreur lors du chargement des utilisateurs. Utilisation des données de démonstration.","warning")}finally{l(!1)}},m=P.useMemo(()=>t.filter(e=>"Tous"===o||e.status===o).filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.email.toLowerCase().includes(n.toLowerCase())),[t,n,o]);return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700",children:"Gestion des Utilisateurs"}),e.jsx("button",{onClick:()=>{f({name:"",email:"",company:"",status:"Actif"}),u(!0)},className:"bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ajouter un utilisateur"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsx("input",{type:"text",placeholder:"Rechercher par nom ou email...",className:"w-full sm:w-1/2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-agria-green",value:n,onChange:e=>i(e.target.value),"aria-label":"Rechercher des utilisateurs"}),e.jsxs("select",{className:"w-full sm:w-auto p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-agria-green",value:o,onChange:e=>a(e.target.value),"aria-label":"Filtrer les utilisateurs par statut",children:[e.jsx("option",{children:"Tous"}),e.jsx("option",{children:"Actif"}),e.jsx("option",{children:"En attente"}),e.jsx("option",{children:"Bloqué"})]})]}),s?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement des utilisateurs..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entreprise"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de création"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.length>0?m.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.company}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(ie,{status:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.creationDate).toLocaleDateString("fr-FR")}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>(e=>{f(e),u(!0)})(t),className:"text-indigo-600 hover:text-indigo-900",children:"Modifier"}),e.jsx("button",{onClick:()=>(async e=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible."))try{await R.deleteUser(e),r(t=>t.filter(t=>t.id!==e)),h("Utilisateur supprimé avec succès","success")}catch(t){h("Erreur lors de la suppression de l'utilisateur","error")}})(t.id),className:"text-red-600 hover:text-red-900 ml-4",children:"Supprimer"})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Aucun utilisateur trouvé."})})})]})}),c&&d&&e.jsx(oe,{user:d,onSave:async e=>{try{if(e.id){const t=await R.updateUser(e.id,e);r(r=>r.map(r=>r.id===e.id?{...r,...t.user}:r)),h("Utilisateur modifié avec succès","success")}else{const t={name:e.name||"",email:e.email||"",company:e.company||"",status:e.status||"En attente"},n=await R.createUser(t);r(e=>[...e,n.user]),h("Utilisateur créé avec succès","success")}u(!1),f(null)}catch(t){h("Erreur lors de la sauvegarde de l'utilisateur","error")}},onClose:()=>u(!1)})]})},se="agria-app-settings",le="agria-appearance-settings",ce="agria-email-settings",ue="agria-payment-settings",de=({title:t,children:r})=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4 pb-2 border-b",children:t}),e.jsx("div",{className:"space-y-4",children:r})]}),fe=()=>{var t,r,n,i,o,a,s,l,c,u,d,f,h,p;const[m,g]=P.useState({restaurantName:"Agria Rouen",address:"2 Rue Saint-Sever, 76100 Rouen",phone:"02 32 18 97 80",email:"secretariatagria@free.fr",openingHours:"Lundi - Vendredi : 11h20 - 13h30"}),[y,b]=P.useState({logo:"",backgroundType:"color",backgroundValue:"#f9fafb",header:{titleText:"AGRIA ROUEN",backgroundColor:"rgba(255, 255, 255, 0.8)",titleColor:"#1f2937",titleFontFamily:"'Playfair Display', serif"},menu:{backgroundColor:"#f1f5f9",textColor:"#4b5563",titleColor:"#374151",fontSize:"1rem",fontFamily:"'Montserrat', sans-serif"},footer:{logo:"",backgroundColor:"#111827",textColor:"#D1D5DB",titleColor:"#FFFFFF",fontFamily:"'Montserrat', sans-serif",descriptionText:"Votre pause déjeuner gourmande et équilibrée au coeur de Rouen.",copyrightText:"Agria Rouen. Tous droits réservés.",showLinks:!0,showSocial:!0,showNewsletter:!0}}),[v,x]=P.useState({provider:"smtp",fromName:"Agria Rouen",fromEmail:"noreply@agria-rouen.fr",smtpHost:"",smtpPort:587,smtpUser:"",smtpPass:"",smtpSecure:!0,apiKey:""}),[j,I]=P.useState({current:"",new:"",confirm:""}),[w,N]=P.useState({apiKey:"pk_test_************************",secretKey:"sk_test_***********************",cardReader:"Stripe Reader M2"}),{addToast:_}=L();P.useEffect(()=>{try{const e=localStorage.getItem(se);e&&g(JSON.parse(e));const t=localStorage.getItem(le);if(t){const e=JSON.parse(t);b(t=>({...t,...e,header:{...t.header,...e.header||{}},menu:{...t.menu,...e.menu||{}},footer:{...t.footer,...e.footer||{}}}))}const r=localStorage.getItem(ce);r&&x(JSON.parse(r));const n=localStorage.getItem(ue);n&&N(JSON.parse(n))}catch(e){}},[]);const k=e=>{const{name:t,value:r}=e.target;g(e=>({...e,[t]:r}))},A=(e,t)=>{b(r=>({...r,[e]:t}))},C=(e,t)=>{b(r=>({...r,header:{...r.header,[e]:t}}))},O=(e,t)=>{b(r=>({...r,menu:{...r.menu,[e]:t}}))},E=(e,t)=>{b(r=>({...r,footer:{...r.footer,[e]:t}}))},S=e=>{const{name:t,value:r,type:n}=e.target;if("checkbox"===n){const{checked:r}=e.target;x(e=>({...e,[t]:r}))}else{const e="number"===n?parseInt(r,10):r;x(r=>({...r,[t]:e}))}},T=(e,t)=>{if(t.target.files&&t.target.files[0]){const r=t.target.files[0];if(r.size>2097152)return void _("L'image est trop grande (max 2 Mo).","error");const n=new FileReader;n.onloadend=()=>{"backgroundValue"===e?b(e=>({...e,backgroundType:"image",backgroundValue:n.result})):"logo"===e?A("logo",n.result):"footerLogo"===e&&E("logo",n.result)},n.readAsDataURL(r)}},q=e=>{const{name:t,value:r}=e.target;I(e=>({...e,[t]:r}))},M=e=>{const{name:t,value:r}=e.target;N(e=>({...e,[t]:r}))},D=y.footer||{logo:"",backgroundColor:"",textColor:"",titleColor:"",fontFamily:"",descriptionText:"",copyrightText:"",showLinks:!0,showSocial:!0,showNewsletter:!0};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700 mb-6",children:"Paramètres"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx(de,{title:"Informations du Restaurant",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),localStorage.setItem(se,JSON.stringify(m)),_("Informations générales sauvegardées !","success")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"restaurantName",className:"block text-sm font-medium text-gray-700",children:"Nom du site"}),e.jsx("input",{type:"text",name:"restaurantName",id:"restaurantName",value:m.restaurantName,onChange:k,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Adresse"}),e.jsx("input",{type:"text",name:"address",id:"address",value:m.address,onChange:k,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),e.jsx("input",{type:"tel",name:"phone",id:"phone",value:m.phone,onChange:k,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email de contact"}),e.jsx("input",{type:"email",name:"email",id:"email",value:m.email,onChange:k,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"openingHours",className:"block text-sm font-medium text-gray-700",children:"Horaires d'ouverture"}),e.jsx("input",{type:"text",name:"openingHours",id:"openingHours",value:m.openingHours,onChange:k,className:"mt-1 block w-full input-style"})]}),e.jsx("button",{type:"submit",className:"w-full btn-primary",children:"Sauvegarder les informations"})]})}),e.jsx(de,{title:"Personnalisation de l'Apparence",children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),localStorage.setItem(le,JSON.stringify(y)),_("Apparence sauvegardée ! Rechargez le site public pour voir les changements.","success"),window.dispatchEvent(new Event("storage"))},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo du site (en-tête)"}),e.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-12 bg-gray-100 border rounded flex items-center justify-center p-1",children:y.logo?e.jsx("img",{src:y.logo,alt:"Aperçu du logo",className:"max-h-full max-w-xs object-contain"}):e.jsx("span",{className:"text-xs text-gray-400",children:"Aucun"})}),e.jsxs("label",{htmlFor:"logo-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Changer le logo",e.jsx("input",{id:"logo-upload",type:"file",className:"hidden",accept:"image/*",onChange:e=>T("logo",e)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Arrière-plan principal"}),e.jsxs("div",{className:"mt-2 flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"backgroundType",value:"color",checked:"color"===y.backgroundType,onChange:()=>A("backgroundType","color"),className:"form-radio h-4 w-4 text-agria-green focus:ring-agria-green"}),e.jsx("span",{className:"ml-2",children:"Couleur"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"backgroundType",value:"image",checked:"image"===y.backgroundType,onChange:()=>A("backgroundType","image"),className:"form-radio h-4 w-4 text-agria-green focus:ring-agria-green"}),e.jsx("span",{className:"ml-2",children:"Image"})]})]}),e.jsx("div",{className:"mt-2",children:"color"===y.backgroundType?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:y.backgroundValue,onChange:e=>A("backgroundValue",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:y.backgroundValue,onChange:e=>A("backgroundValue",e.target.value),className:"input-style w-full"})]}):e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-12 bg-gray-100 border rounded flex items-center justify-center overflow-hidden",children:y.backgroundValue&&y.backgroundValue.startsWith("data:image")?e.jsx("img",{src:y.backgroundValue,alt:"Aperçu de l'arrière-plan",className:"h-full w-full object-cover"}):e.jsx("span",{className:"text-xs text-gray-400",children:"Aucune"})}),e.jsxs("label",{htmlFor:"bg-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Changer l'image",e.jsx("input",{id:"bg-upload",type:"file",className:"hidden",accept:"image/*",onChange:e=>T("backgroundValue",e)})]})]})})]}),e.jsx("hr",{}),e.jsx("h3",{className:"text-md font-semibold text-gray-600 pt-2",children:"Personnalisation de l'En-tête"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"headerTitleText",className:"block text-sm font-medium text-gray-700",children:"Texte du titre (si pas de logo)"}),e.jsx("input",{type:"text",id:"headerTitleText",value:(null==(t=y.header)?void 0:t.titleText)||"",onChange:e=>C("titleText",e.target.value),className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur d'arrière-plan"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:(null==(r=y.header)?void 0:r.backgroundColor)||"",onChange:e=>C("backgroundColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:(null==(n=y.header)?void 0:n.backgroundColor)||"",onChange:e=>C("backgroundColor",e.target.value),className:"input-style w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur du titre"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:(null==(i=y.header)?void 0:i.titleColor)||"",onChange:e=>C("titleColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:(null==(o=y.header)?void 0:o.titleColor)||"",onChange:e=>C("titleColor",e.target.value),className:"input-style w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"headerFontFamily",className:"block text-sm font-medium text-gray-700",children:"Police du titre"}),e.jsxs("select",{id:"headerFontFamily",value:(null==(a=y.header)?void 0:a.titleFontFamily)||"",onChange:e=>C("titleFontFamily",e.target.value),className:"mt-1 block w-full input-style",children:[e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display (Défaut)"}),e.jsx("option",{value:"'Montserrat', sans-serif",children:"Montserrat"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),e.jsx("option",{value:"Georgia, serif",children:"Georgia"}),e.jsx("option",{value:"Verdana, sans-serif",children:"Verdana"})]})]}),e.jsx("hr",{}),e.jsx("h3",{className:"text-md font-semibold text-gray-600 pt-2",children:"Personnalisation du Menu Latéral"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur d'arrière-plan"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:(null==(s=y.menu)?void 0:s.backgroundColor)||"",onChange:e=>O("backgroundColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:(null==(l=y.menu)?void 0:l.backgroundColor)||"",onChange:e=>O("backgroundColor",e.target.value),className:"input-style w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur du texte"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:(null==(c=y.menu)?void 0:c.textColor)||"",onChange:e=>O("textColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:(null==(u=y.menu)?void 0:u.textColor)||"",onChange:e=>O("textColor",e.target.value),className:"input-style w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur du titre"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:(null==(d=y.menu)?void 0:d.titleColor)||"",onChange:e=>O("titleColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:(null==(f=y.menu)?void 0:f.titleColor)||"",onChange:e=>O("titleColor",e.target.value),className:"input-style w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"menuFontSize",className:"block text-sm font-medium text-gray-700",children:"Taille de police"}),e.jsx("input",{type:"text",id:"menuFontSize",value:(null==(h=y.menu)?void 0:h.fontSize)||"",onChange:e=>O("fontSize",e.target.value),placeholder:"ex: 16px or 1rem",className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"menuFontFamily",className:"block text-sm font-medium text-gray-700",children:"Police de caractère"}),e.jsxs("select",{id:"menuFontFamily",value:(null==(p=y.menu)?void 0:p.fontFamily)||"",onChange:e=>O("fontFamily",e.target.value),className:"mt-1 block w-full input-style",children:[e.jsx("option",{value:"'Montserrat', sans-serif",children:"Montserrat (Défaut)"}),e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),e.jsx("option",{value:"Georgia, serif",children:"Georgia"}),e.jsx("option",{value:"Verdana, sans-serif",children:"Verdana"})]})]}),e.jsx("hr",{}),e.jsx("h3",{className:"text-md font-semibold text-gray-600 pt-2",children:"Personnalisation du Pied de Page"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Logo du pied de page"}),e.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-12 bg-gray-100 border rounded flex items-center justify-center p-1",children:D.logo?e.jsx("img",{src:D.logo,alt:"Aperçu du logo",className:"max-h-full max-w-xs object-contain"}):e.jsx("span",{className:"text-xs text-gray-400",children:"Aucun"})}),e.jsxs("label",{htmlFor:"footer-logo-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50",children:["Changer",e.jsx("input",{id:"footer-logo-upload",type:"file",className:"hidden",accept:"image/*",onChange:e=>T("footerLogo",e)})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur d'arrière-plan"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:D.backgroundColor,onChange:e=>E("backgroundColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:D.backgroundColor,onChange:e=>E("backgroundColor",e.target.value),className:"input-style w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur du texte"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:D.textColor,onChange:e=>E("textColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:D.textColor,onChange:e=>E("textColor",e.target.value),className:"input-style w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Couleur des titres"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:D.titleColor,onChange:e=>E("titleColor",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:D.titleColor,onChange:e=>E("titleColor",e.target.value),className:"input-style w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Police de caractère"}),e.jsxs("select",{value:D.fontFamily,onChange:e=>E("fontFamily",e.target.value),className:"mt-1 block w-full input-style",children:[e.jsx("option",{value:"'Montserrat', sans-serif",children:"Montserrat (Défaut)"}),e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),e.jsx("option",{value:"Georgia, serif",children:"Georgia"}),e.jsx("option",{value:"Verdana, sans-serif",children:"Verdana"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Texte de description"}),e.jsx("input",{type:"text",value:D.descriptionText,onChange:e=>E("descriptionText",e.target.value),className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Texte de copyright"}),e.jsx("input",{type:"text",value:D.copyrightText,onChange:e=>E("copyrightText",e.target.value),className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Composants à afficher"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:D.showLinks,onChange:e=>E("showLinks",e.target.checked),className:"form-checkbox"})," ",e.jsx("span",{className:"ml-2",children:"Liens rapides"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:D.showSocial,onChange:e=>E("showSocial",e.target.checked),className:"form-checkbox"})," ",e.jsx("span",{className:"ml-2",children:"Suivez-nous"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:D.showNewsletter,onChange:e=>E("showNewsletter",e.target.checked),className:"form-checkbox"})," ",e.jsx("span",{className:"ml-2",children:"Newsletter"})]})]})]}),e.jsx("button",{type:"submit",className:"w-full btn-primary mt-4",children:"Sauvegarder l'apparence"})]})}),e.jsxs(de,{title:"Gestion des données",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{window.confirm("Êtes-vous sûr de vouloir réinitialiser le menu ? Le menu actuel sera perdu.")&&(localStorage.removeItem("weeklyMenu"),_("Le menu a été réinitialisé.","success"))},className:"w-full btn-danger",children:"Réinitialiser le menu"}),e.jsx("button",{type:"button",onClick:()=>{window.confirm("Êtes-vous sûr de vouloir réinitialiser les actualités ? Toutes les modifications seront perdues.")&&(localStorage.setItem("agria-actu",JSON.stringify(B)),_("Les actualités ont été réinitialisées aux valeurs par défaut.","success"))},className:"w-full btn-danger",children:"Réinitialiser les actus"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Attention, ces actions sont irréversibles."})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(de,{title:"Sécurité",children:e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),j.new!==j.confirm)return void _("Le nouveau mot de passe et sa confirmation ne correspondent pas.","error");if(j.new.length<6)return void _("Le nouveau mot de passe doit contenir au moins 6 caractères.","error");const t={lastChanged:(new Date).toISOString(),hasPassword:!0};localStorage.setItem("agria-password-settings",JSON.stringify(t)),I({current:"",new:"",confirm:""}),_("Mot de passe mis à jour avec succès !","success")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"current",className:"block text-sm font-medium text-gray-700",children:"Mot de passe actuel"}),e.jsx("input",{type:"password",name:"current",id:"current",value:j.current,onChange:q,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new",className:"block text-sm font-medium text-gray-700",children:"Nouveau mot de passe"}),e.jsx("input",{type:"password",name:"new",id:"new",value:j.new,onChange:q,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm",className:"block text-sm font-medium text-gray-700",children:"Confirmer le nouveau mot de passe"}),e.jsx("input",{type:"password",name:"confirm",id:"confirm",value:j.confirm,onChange:q,className:"mt-1 block w-full input-style"})]}),e.jsx("button",{type:"submit",className:"w-full btn-primary",children:"Changer le mot de passe"})]})}),e.jsxs(de,{title:"Configuration de Paiement",children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),localStorage.setItem(ue,JSON.stringify(w)),_("Clés de paiement sauvegardées avec succès !","success")},className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-600",children:"Passerelle de Paiement (API)"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700",children:"Clé API Publique"}),e.jsx("input",{type:"password",name:"apiKey",id:"apiKey",value:w.apiKey,onChange:M,className:"mt-1 block w-full input-style",placeholder:"pk_test_..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"secretKey",className:"block text-sm font-medium text-gray-700",children:"Clé API Secrète"}),e.jsx("input",{type:"password",name:"secretKey",id:"secretKey",value:w.secretKey,onChange:M,className:"mt-1 block w-full input-style",placeholder:"sk_test_..."})]}),e.jsx("button",{type:"submit",className:"w-full btn-secondary",children:"Sauvegarder les clés"})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-600",children:"Lecteur de carte de crédit"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cardReader",className:"block text-sm font-medium text-gray-700",children:"Modèle de lecteur"}),e.jsxs("select",{name:"cardReader",id:"cardReader",value:w.cardReader,onChange:M,className:"mt-1 block w-full input-style",children:[e.jsx("option",{children:"Stripe Reader M2"}),e.jsx("option",{children:"Square Terminal"}),e.jsx("option",{children:"Verifone P400"}),e.jsx("option",{children:"Ingenico Move/5000"})]})]}),e.jsx("button",{type:"button",onClick:()=>{_(`Connexion au lecteur '${w.cardReader}'...`,"info"),setTimeout(()=>{_(`Lecteur '${w.cardReader}' connecté.`,"success")},2e3)},className:"w-full btn-primary",children:"Connecter un lecteur"})]})]}),e.jsxs(de,{title:"Configuration Email",children:[e.jsx("p",{className:"text-xs text-gray-500 -mt-2 mb-2",children:"Configurez comment le système envoie des emails pour la messagerie et les newsletters."}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),localStorage.setItem(ce,JSON.stringify(v)),_("Configuration email sauvegardée !","success")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"provider",className:"block text-sm font-medium text-gray-700",children:"Fournisseur de messagerie"}),e.jsxs("select",{name:"provider",id:"provider",value:v.provider,onChange:S,className:"mt-1 block w-full input-style",children:[e.jsx("option",{value:"smtp",children:"SMTP"}),e.jsx("option",{value:"sendgrid",children:"SendGrid"}),e.jsx("option",{value:"mailgun",children:"Mailgun"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fromName",className:"block text-sm font-medium text-gray-700",children:"Nom de l'expéditeur"}),e.jsx("input",{type:"text",name:"fromName",id:"fromName",value:v.fromName,onChange:S,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fromEmail",className:"block text-sm font-medium text-gray-700",children:"Email de l'expéditeur"}),e.jsx("input",{type:"email",name:"fromEmail",id:"fromEmail",value:v.fromEmail,onChange:S,className:"mt-1 block w-full input-style"})]})]}),"smtp"===v.provider&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-md border",children:[e.jsx("h4",{className:"font-semibold text-gray-600",children:"Paramètres SMTP"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpHost",className:"block text-sm font-medium text-gray-700",children:"Hôte SMTP"}),e.jsx("input",{type:"text",name:"smtpHost",id:"smtpHost",value:v.smtpHost,onChange:S,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpPort",className:"block text-sm font-medium text-gray-700",children:"Port"}),e.jsx("input",{type:"number",name:"smtpPort",id:"smtpPort",value:v.smtpPort,onChange:S,className:"mt-1 block w-full input-style"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpUser",className:"block text-sm font-medium text-gray-700",children:"Utilisateur"}),e.jsx("input",{type:"text",name:"smtpUser",id:"smtpUser",value:v.smtpUser,onChange:S,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"smtpPass",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),e.jsx("input",{type:"password",name:"smtpPass",id:"smtpPass",value:v.smtpPass,onChange:S,className:"mt-1 block w-full input-style"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"smtpSecure",id:"smtpSecure",checked:v.smtpSecure,onChange:S,className:"h-4 w-4 text-agria-green focus:ring-agria-green border-gray-300 rounded"}),e.jsx("label",{htmlFor:"smtpSecure",className:"ml-2 block text-sm text-gray-900",children:"Utiliser une connexion sécurisée (TLS/SSL)"})]})]}),("sendgrid"===v.provider||"mailgun"===v.provider)&&e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-md border",children:[e.jsx("h4",{className:"font-semibold text-gray-600",children:"Paramètres API"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"apiKey",className:"block text-sm font-medium text-gray-700",children:"Clé API"}),e.jsx("input",{type:"password",name:"apiKey",id:"apiKey",value:v.apiKey,onChange:S,className:"mt-1 block w-full input-style"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",className:"w-full btn-primary",children:"Sauvegarder"}),e.jsx("button",{type:"button",onClick:()=>{if(!v.fromEmail)return void _("Veuillez configurer l'email d'expédition avant de tester.","error");const e=prompt("Entrez votre adresse email pour recevoir un email de test :");e&&/^\S+@\S+\.\S+$/.test(e)?_(`(Simulation) Email de test envoyé à ${e} depuis ${v.fromEmail} via ${v.provider}.`,"info"):e&&_("Adresse email invalide.","error")},className:"w-full btn-secondary",children:"Envoyer un test"})]})]})]})]})]}),e.jsx("style",{children:"\n                .input-style {\n                    padding: 0.5rem 0.75rem;\n                    border: 1px solid #D1D5DB;\n                    border-radius: 0.375rem;\n                    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n                }\n                .input-style:focus {\n                    outline: 2px solid transparent;\n                    outline-offset: 2px;\n                    border-color: #009A58;\n                    box-shadow: 0 0 0 2px #009A58;\n                }\n                .btn-primary {\n                    padding: 0.5rem 1rem;\n                    background-color: #009A58;\n                    color: white;\n                    font-weight: bold;\n                    border-radius: 0.375rem;\n                    transition: background-color 0.2s;\n                }\n                .btn-primary:hover {\n                    background-color: #007a4a;\n                }\n                .btn-secondary {\n                    padding: 0.5rem 1rem;\n                    background-color: #F3F4F6;\n                    color: #1F2937;\n                    font-weight: bold;\n                    border-radius: 0.375rem;\n                    border: 1px solid #D1D5DB;\n                    transition: background-color 0.2s;\n                }\n                .btn-secondary:hover {\n                    background-color: #E5E7EB;\n                }\n                .btn-danger {\n                    padding: 0.5rem 1rem;\n                    background-color: #EF4444;\n                    color: white;\n                    font-weight: bold;\n                    border-radius: 0.375rem;\n                    transition: background-color 0.2s;\n                }\n                .btn-danger:hover {\n                    background-color: #DC2626;\n                }\n                .form-checkbox {\n                    color: #009A58;\n                    border-radius: 0.25rem;\n                }\n                .form-checkbox:focus {\n                    ring: #009A58;\n                }\n            "})]})},he="agria-info-page-content",pe={transportItems:['Bus T4 - Arrêt "Martainville"','Métro - Station "Joffre-Mutualité" (10 min à pied)']},me=()=>{const[t,r]=P.useState(pe),[n,i]=P.useState("");P.useEffect(()=>{try{const e=localStorage.getItem(he);r(e?JSON.parse(e):pe)}catch(e){r(pe)}},[]);return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700 mb-6",children:'Gestion de la Page "Infos Utiles"'}),n&&e.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded-md mb-4",children:n}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Transports en commun"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Gérez la liste des transports affichés sur la page. Les informations générales (adresse, horaires) se gèrent dans les Paramètres."}),e.jsx("div",{className:"space-y-2",children:t.transportItems.map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:e=>((e,n)=>{const i=[...t.transportItems];i[e]=n,r(e=>({...e,transportItems:i}))})(i,e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-agria-green",placeholder:"Ex: Bus T1 - Arrêt Central"}),e.jsx("button",{onClick:()=>(e=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cet élément ?")){const n=t.transportItems.filter((t,r)=>r!==e);r(e=>({...e,transportItems:n}))}})(i),className:"text-red-500 hover:text-red-700 p-2",title:"Supprimer",children:e.jsx(p,{})})]},i))}),e.jsxs("button",{onClick:()=>{r(e=>({...e,transportItems:[...e.transportItems,""]}))},className:"mt-2 text-agria-green hover:text-agria-green-dark font-semibold flex items-center gap-2",children:[e.jsx(m,{})," Ajouter un transport"]})]}),e.jsx("hr",{}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:()=>{localStorage.setItem(he,JSON.stringify(t)),i("Contenu sauvegardé avec succès !"),setTimeout(()=>i(""),3e3)},className:"bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Sauvegarder les modifications"})})]})]})},ge="agria-traiteur-page-content",ye={mainHeading:"Organisez vos événements professionnels",mainParagraph:"L'AGRIA met son savoir-faire et la qualité de ses produits au service de vos événements d'entreprise. Séminaires, réunions, pots de départ ou cocktails, nous concevons avec vous des prestations sur mesure pour garantir la réussite de vos réceptions.",mainBackgroundType:"image",mainBackgroundValue:"https://source.unsplash.com/random/1200x400/?catering,food,event",cards:[{title:"Pauses-café",description:"Viennoiseries, boissons chaudes et jus de fruits pour bien démarrer la journée.",image:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAEgAyADASIAAhEBAxEB/8QAGwABAQACAwEAAAAAAAAAAAAAAAEGBwIDBAX/xABBEAABAwIFAgMGBAMIAQQDAAABAAIDBBEFEgYhMUETIlFhcYEHFDJCkaGxIzNSYnLR4UKC8BVSFxgkNGOCstLi/QAGAEBAQEBAQAAAAAAAAAAAAAAAAECAwT/xAAhEQEBAAICAgMBAQEAAAAAAAAAAQIRITEDEkFRIgNCYf/aAAwDAQACEQMRAD8A9UoiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAibGFwA="},{title:"Moments de convivialité",description:"Un assortiment de pièces salées et sucrées pour des moments conviviaux.",image:"https://source.unsplash.com/random/400x300/?cocktail,buffet"}],ctaHeading:"Un projet ? Une question ?",ctaParagraph:"Contactez-nous pour discuter de vos besoins et obtenir un devis personnalisé."},be=()=>{const[t,r]=P.useState(ye),{addToast:n}=L();P.useEffect(()=>{try{const e=localStorage.getItem(ge);r(e?JSON.parse(e):ye)}catch(e){r(ye)}},[]);const i=e=>{const{name:t,value:n}=e.target;r(e=>({...e,[t]:n}))},o=(e,t)=>{r(r=>({...r,[e]:t}))},a=(e,n,i)=>{const o=[...t.cards];o[e]={...o[e],[n]:i},r(e=>({...e,cards:o}))};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700 mb-6",children:'Gestion de la Page "Prestations Traiteur"'}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b pb-2",children:"Section principale"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mainHeading",className:"block text-sm font-medium text-gray-700",children:"Titre principal"}),e.jsx("input",{type:"text",name:"mainHeading",id:"mainHeading",value:t.mainHeading,onChange:i,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mainParagraph",className:"block text-sm font-medium text-gray-700",children:"Paragraphe d'introduction"}),e.jsx("textarea",{name:"mainParagraph",id:"mainParagraph",value:t.mainParagraph,onChange:i,rows:4,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Arrière-plan de la section"}),e.jsxs("div",{className:"mt-2 flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"mainBackgroundType",value:"color",checked:"color"===t.mainBackgroundType,onChange:()=>o("mainBackgroundType","color"),className:"form-radio h-4 w-4 text-agria-green focus:ring-agria-green"}),e.jsx("span",{className:"ml-2",children:"Couleur"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"mainBackgroundType",value:"image",checked:"image"===t.mainBackgroundType,onChange:()=>o("mainBackgroundType","image"),className:"form-radio h-4 w-4 text-agria-green focus:ring-agria-green"}),e.jsx("span",{className:"ml-2",children:"Image"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"mainBackgroundType",value:"video",checked:"video"===t.mainBackgroundType,onChange:()=>o("mainBackgroundType","video"),className:"form-radio h-4 w-4 text-agria-green focus:ring-agria-green"}),e.jsx("span",{className:"ml-2",children:"Vidéo"})]})]}),e.jsxs("div",{className:"mt-2",children:["color"===t.mainBackgroundType&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:t.mainBackgroundValue,onChange:e=>o("mainBackgroundValue",e.target.value),className:"p-1 h-10 w-12 block bg-white border border-gray-300 rounded-md cursor-pointer"}),e.jsx("input",{type:"text",value:t.mainBackgroundValue,onChange:e=>o("mainBackgroundValue",e.target.value),className:"input-style w-full",placeholder:"#ffffff"})]}),("image"===t.mainBackgroundType||"video"===t.mainBackgroundType)&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:t.mainBackgroundValue&&!t.mainBackgroundValue.startsWith("data:")?t.mainBackgroundValue:"",onChange:e=>o("mainBackgroundValue",e.target.value),className:"input-style w-full",placeholder:"Coller une URL ou charger un fichier local"}),e.jsxs("label",{htmlFor:"bg-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 inline-block",children:[`Charger une ${"image"===t.mainBackgroundType?"image":"vidéo"} locale`,e.jsx("input",{id:"bg-upload",type:"file",className:"hidden",accept:`${t.mainBackgroundType}/*`,onChange:e=>{if(e.target.files&&e.target.files[0]){const r=e.target.files[0],i=t.mainBackgroundType,a="video"===i?52428800:5242880;if(r.size>a)return void n(`Le fichier est trop volumineux. La taille maximale est de ${a/1024/1024} Mo.`,"error");if("image"===i&&!r.type.startsWith("image/"))return void n("Veuillez sélectionner un fichier image valide.","error");if("video"===i&&!r.type.startsWith("video/"))return void n("Veuillez sélectionner un fichier vidéo valide.","error");const s=new FileReader;s.onloadend=()=>{o("mainBackgroundValue",s.result)},s.readAsDataURL(r),e.target.value=""}}})]}),e.jsx("div",{className:"w-full h-24 bg-gray-100 border rounded flex items-center justify-center overflow-hidden",children:t.mainBackgroundValue?"image"===t.mainBackgroundType?e.jsx("img",{src:t.mainBackgroundValue,alt:"Aperçu",className:"h-full w-full object-cover"}):e.jsx("video",{src:t.mainBackgroundValue,className:"h-full w-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0},t.mainBackgroundValue):e.jsx("span",{className:"text-xs text-gray-400",children:"Aperçu"})})]})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b pb-2",children:"Cartes de service"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.cards.map((i,o)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("div",{className:"w-full h-32 border-2 border-dashed rounded-md flex items-center justify-center text-gray-400 hover:bg-gray-100 hover:border-gray-500 transition-colors bg-white",children:i.image?e.jsx("img",{src:i.image,alt:i.title||"Aperçu",className:"w-full h-full object-cover rounded-md"}):e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"mx-auto h-8 w-8"}),e.jsx("span",{className:"text-xs mt-1 block",children:"Ajouter une image"})]})}),e.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/webp",className:"hidden",onChange:e=>((e,i)=>{if(i.target.files&&i.target.files[0]){const o=i.target.files[0];if(o.size>2097152)return void n("L'image est trop grande. La taille maximale est de 2 Mo.","error");const a=new FileReader;a.onloadend=()=>{const n=[...t.cards];n[e]={...n[e],image:a.result},r(e=>({...e,cards:n}))},a.readAsDataURL(o)}})(o,e)})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`card-title-${o}`,className:"block text-sm font-medium text-gray-700",children:["Titre de la carte ",o+1]}),e.jsx("input",{type:"text",id:`card-title-${o}`,value:i.title,onChange:e=>a(o,"title",e.target.value),className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`card-desc-${o}`,className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:`card-desc-${o}`,value:i.description,onChange:e=>a(o,"description",e.target.value),rows:3,className:"mt-1 block w-full input-style"})]})]},o))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4 border-b pb-2",children:"Appel à l'action (CTA)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ctaHeading",className:"block text-sm font-medium text-gray-700",children:"Titre du CTA"}),e.jsx("input",{type:"text",name:"ctaHeading",id:"ctaHeading",value:t.ctaHeading,onChange:i,className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ctaParagraph",className:"block text-sm font-medium text-gray-700",children:"Texte du CTA"}),e.jsx("input",{type:"text",name:"ctaParagraph",id:"ctaParagraph",value:t.ctaParagraph,onChange:i,className:"mt-1 block w-full input-style"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:()=>{localStorage.setItem(ge,JSON.stringify(t)),n("Contenu sauvegardé avec succès !","success")},className:"bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Sauvegarder les modifications"})})]}),e.jsx("style",{children:".input-style {padding: 0.5rem 0.75rem; border: 1px solid #D1D5DB; border-radius: 0.375rem;} .input-style:focus {outline: 2px solid transparent; outline-offset: 2px; border-color: #009A58; box-shadow: 0 0 0 2px #009A58;} .form-radio {color: #009A58;}"})]})};var ve,xe,je,Ie,we,Ne,_e,ke,Ae,Ce,Oe,Ee,Se,Te,Pe,qe,Le,Me,De,Re,Be,Fe,Ue,ze,He,Ve,Ke,$e,Ge,We,Je,Ze,Ye,Qe,Xe,et,tt,rt,nt,it,ot,at,st,lt,ct,ut,dt,ft,ht,pt,mt,gt,yt,bt,vt,xt,jt,It,wt,Nt,_t,kt,At,Ct,Ot,Et,St,Tt,Pt,qt,Lt,Mt,Dt,Rt,Bt,Ft,Ut,zt,Ht,Vt,Kt,$t,Gt,Wt,Jt,Zt,Yt,Qt,Xt,er,tr,rr,nr,ir,or,ar,sr,lr,cr,ur,dr,fr,hr,pr,mr,gr,yr,br,vr,xr,jr,Ir,wr,Nr,_r,kr,Ar,Cr,Or,Er,Sr,Tr,Pr,qr,Lr,Mr,Dr,Rr;function Br(){if(Ie)return je;return Ie=1,je=function(e,t){return e===t||e!=e&&t!=t}}function Fr(){if(Ne)return we;Ne=1;var e=Br();return we=function(t,r){for(var n=t.length;n--;)if(e(t[n][0],r))return n;return-1}}function Ur(){if(qe)return Pe;qe=1;var e=xe?ve:(xe=1,ve=function(){this.__data__=[],this.size=0}),t=function(){if(ke)return _e;ke=1;var e=Fr(),t=Array.prototype.splice;return _e=function(r){var n=this.__data__,i=e(n,r);return!(i<0||(i==n.length-1?n.pop():t.call(n,i,1),--this.size,0))}}(),r=function(){if(Ce)return Ae;Ce=1;var e=Fr();return Ae=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]}}(),n=function(){if(Ee)return Oe;Ee=1;var e=Fr();return Oe=function(t){return e(this.__data__,t)>-1}}(),i=function(){if(Te)return Se;Te=1;var e=Fr();return Se=function(t,r){var n=this.__data__,i=e(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}();function o(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,Pe=o}function zr(){if(Ve)return He;Ve=1;var e="object"==typeof V&&V&&V.Object===Object&&V;return He=e}function Hr(){if($e)return Ke;$e=1;var e=zr(),t="object"==typeof self&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ke=r}function Vr(){if(We)return Ge;We=1;var e=Hr().Symbol;return Ge=e}function Kr(){if(et)return Xe;et=1;var e=Vr(),t=function(){if(Ze)return Je;Ze=1;var e=Vr(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;return Je=function(e){var t=r.call(e,i),o=e[i];try{e[i]=void 0;var a=!0}catch(l){}var s=n.call(e);return a&&(t?e[i]=o:delete e[i]),s}}(),r=function(){if(Qe)return Ye;Qe=1;var e=Object.prototype.toString;return Ye=function(t){return e.call(t)}}(),n=e?e.toStringTag:void 0;return Xe=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n&&n in Object(e)?t(e):r(e)}}function $r(){if(rt)return tt;return rt=1,tt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function Gr(){if(it)return nt;it=1;var e=Kr(),t=$r();return nt=function(r){if(!t(r))return!1;var n=e(r);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}}function Wr(){if(lt)return st;lt=1;var e,t=function(){if(at)return ot;at=1;var e=Hr()["__core-js_shared__"];return ot=e}(),r=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return st=function(e){return!!r&&r in e}}function Jr(){if(ut)return ct;ut=1;var e=Function.prototype.toString;return ct=function(t){if(null!=t){try{return e.call(t)}catch(r){}try{return t+""}catch(r){}}return""}}function Zr(){if(gt)return mt;gt=1;var e=function(){if(ft)return dt;ft=1;var e=Gr(),t=Wr(),r=$r(),n=Jr(),i=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,s=o.toString,l=a.hasOwnProperty,c=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return dt=function(o){return!(!r(o)||t(o))&&(e(o)?c:i).test(n(o))}}(),t=pt?ht:(pt=1,ht=function(e,t){return null==e?void 0:e[t]});return mt=function(r,n){var i=t(r,n);return e(i)?i:void 0}}function Yr(){if(bt)return yt;bt=1;var e=Zr()(Hr(),"Map");return yt=e}function Qr(){if(xt)return vt;xt=1;var e=Zr()(Object,"create");return vt=e}function Xr(){if(Tt)return St;Tt=1;var e=function(){if(It)return jt;It=1;var e=Qr();return jt=function(){this.__data__=e?e(null):{},this.size=0}}(),t=Nt?wt:(Nt=1,wt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),r=function(){if(kt)return _t;kt=1;var e=Qr(),t=Object.prototype.hasOwnProperty;return _t=function(r){var n=this.__data__;if(e){var i=n[r];return"__lodash_hash_undefined__"===i?void 0:i}return t.call(n,r)?n[r]:void 0}}(),n=function(){if(Ct)return At;Ct=1;var e=Qr(),t=Object.prototype.hasOwnProperty;return At=function(r){var n=this.__data__;return e?void 0!==n[r]:t.call(n,r)}}(),i=function(){if(Et)return Ot;Et=1;var e=Qr();return Ot=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=e&&void 0===r?"__lodash_hash_undefined__":r,this}}();function o(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,St=o}function en(){if(Rt)return Dt;Rt=1;var e=Mt?Lt:(Mt=1,Lt=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return Dt=function(t,r){var n=t.__data__;return e(r)?n["string"==typeof r?"string":"hash"]:n.map}}function tn(){if(Wt)return Gt;Wt=1;var e=function(){if(qt)return Pt;qt=1;var e=Xr(),t=Ur(),r=Yr();return Pt=function(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}(),t=function(){if(Ft)return Bt;Ft=1;var e=en();return Bt=function(t){var r=e(this,t).delete(t);return this.size-=r?1:0,r}}(),r=function(){if(zt)return Ut;zt=1;var e=en();return Ut=function(t){return e(this,t).get(t)}}(),n=function(){if(Vt)return Ht;Vt=1;var e=en();return Ht=function(t){return e(this,t).has(t)}}(),i=function(){if($t)return Kt;$t=1;var e=en();return Kt=function(t,r){var n=e(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this}}();function o(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,Gt=o}function rn(){if(Qt)return Yt;Qt=1;var e=Ur(),t=function(){if(Me)return Le;Me=1;var e=Ur();return Le=function(){this.__data__=new e,this.size=0}}(),r=Re?De:(Re=1,De=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}),n=Fe?Be:(Fe=1,Be=function(e){return this.__data__.get(e)}),i=ze?Ue:(ze=1,Ue=function(e){return this.__data__.has(e)}),o=function(){if(Zt)return Jt;Zt=1;var e=Ur(),t=Yr(),r=tn();return Jt=function(n,i){var o=this.__data__;if(o instanceof e){var a=o.__data__;if(!t||a.length<199)return a.push([n,i]),this.size=++o.size,this;o=this.__data__=new r(a)}return o.set(n,i),this.size=o.size,this}}();function a(t){var r=this.__data__=new e(t);this.size=r.size}return a.prototype.clear=t,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=i,a.prototype.set=o,Yt=a}function nn(){if(ir)return nr;ir=1;var e=tn(),t=er?Xt:(er=1,Xt=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}),r=rr?tr:(rr=1,tr=function(e){return this.__data__.has(e)});function n(t){var r=-1,n=null==t?0:t.length;for(this.__data__=new e;++r<n;)this.add(t[r])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,nr=n}function on(){if(ur)return cr;ur=1;var e=nn(),t=ar?or:(ar=1,or=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}),r=lr?sr:(lr=1,sr=function(e,t){return e.has(t)});return cr=function(n,i,o,a,s,l){var c=1&o,u=n.length,d=i.length;if(u!=d&&!(c&&d>u))return!1;var f=l.get(n),h=l.get(i);if(f&&h)return f==i&&h==n;var p=-1,m=!0,g=2&o?new e:void 0;for(l.set(n,i),l.set(i,n);++p<u;){var y=n[p],b=i[p];if(a)var v=c?a(b,y,p,i,n,l):a(y,b,p,n,i,l);if(void 0!==v){if(v)continue;m=!1;break}if(g){if(!t(i,function(e,t){if(!r(g,t)&&(y===e||s(y,e,o,a,l)))return g.push(t)})){m=!1;break}}else if(y!==b&&!s(y,b,o,a,l)){m=!1;break}}return l.delete(n),l.delete(i),m}}function an(){if(br)return yr;br=1;var e=Vr(),t=function(){if(fr)return dr;fr=1;var e=Hr().Uint8Array;return dr=e}(),r=Br(),n=on(),i=pr?hr:(pr=1,hr=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}),o=gr?mr:(gr=1,mr=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}),a=e?e.prototype:void 0,s=a?a.valueOf:void 0;return yr=function(e,a,l,c,u,d,f){switch(l){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=a.byteLength||!d(new t(e),new t(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var h=i;case"[object Set]":var p=1&c;if(h||(h=o),e.size!=a.size&&!p)return!1;var m=f.get(e);if(m)return m==a;c|=2,f.set(e,a);var g=n(h(e),h(a),c,u,d,f);return f.delete(e),g;case"[object Symbol]":if(s)return s.call(e)==s.call(a)}return!1}}function sn(){if(Ir)return jr;Ir=1;var e=Array.isArray;return jr=e}function ln(){if(Nr)return wr;Nr=1;var e=xr?vr:(xr=1,vr=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}),t=sn();return wr=function(r,n,i){var o=n(r);return t(r)?o:e(o,i(r))}}function cn(){if(Er)return Or;Er=1;var e=kr?_r:(kr=1,_r=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}),t=Cr?Ar:(Cr=1,Ar=function(){return[]}),r=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;return Or=n?function(t){return null==t?[]:(t=Object(t),e(n(t),function(e){return r.call(t,e)}))}:t}function un(){if(qr)return Pr;return qr=1,Pr=function(e){return null!=e&&"object"==typeof e}}function dn(){if(Rr)return Dr;Rr=1;var e=function(){if(Mr)return Lr;Mr=1;var e=Kr(),t=un();return Lr=function(r){return t(r)&&"[object Arguments]"==e(r)}}(),t=un(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e(function(){return arguments}())?e:function(e){return t(e)&&n.call(e,"callee")&&!i.call(e,"callee")};return Dr=o}var fn,hn,pn,mn,gn,yn,bn,vn,xn,jn,In,wn={exports:{}};function Nn(){return pn||(pn=1,e=wn,t=wn.exports,r=Hr(),n=hn?fn:(hn=1,fn=function(){return!1}),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=(a?a.isBuffer:void 0)||n,e.exports=s),wn.exports;var e,t,r,n,i,o,a,s}function _n(){if(bn)return yn;bn=1;return yn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}}var kn,An,Cn,On,En,Sn,Tn,Pn,qn,Ln,Mn,Dn,Rn,Bn,Fn,Un,zn,Hn,Vn,Kn,$n,Gn,Wn,Jn,Zn,Yn,Qn,Xn,ei,ti,ri,ni,ii,oi,ai,si,li,ci={exports:{}};function ui(){if(Cn)return An;Cn=1;var e=function(){if(xn)return vn;xn=1;var e=Kr(),t=_n(),r=un(),n={};return n["[object Float32Array]"]=n["[object Float64Array]"]=n["[object Int8Array]"]=n["[object Int16Array]"]=n["[object Int32Array]"]=n["[object Uint8Array]"]=n["[object Uint8ClampedArray]"]=n["[object Uint16Array]"]=n["[object Uint32Array]"]=!0,n["[object Arguments]"]=n["[object Array]"]=n["[object ArrayBuffer]"]=n["[object Boolean]"]=n["[object DataView]"]=n["[object Date]"]=n["[object Error]"]=n["[object Function]"]=n["[object Map]"]=n["[object Number]"]=n["[object Object]"]=n["[object RegExp]"]=n["[object Set]"]=n["[object String]"]=n["[object WeakMap]"]=!1,vn=function(i){return r(i)&&t(i.length)&&!!n[e(i)]}}(),t=In?jn:(In=1,jn=function(e){return function(t){return e(t)}}),r=function(){return kn||(kn=1,e=ci,t=ci.exports,r=zr(),n=t&&!t.nodeType&&t,i=n&&e&&!e.nodeType&&e,o=i&&i.exports===n&&r.process,a=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}(),e.exports=a),ci.exports;var e,t,r,n,i,o,a}(),n=r&&r.isTypedArray,i=n?t(n):e;return An=i}function di(){if(En)return On;En=1;var e=Tr?Sr:(Tr=1,Sr=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}),t=dn(),r=sn(),n=Nn(),i=function(){if(gn)return mn;gn=1;var e=/^(?:0|[1-9]\d*)$/;return mn=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}}(),o=ui(),a=Object.prototype.hasOwnProperty;return On=function(s,l){var c=r(s),u=!c&&t(s),d=!c&&!u&&n(s),f=!c&&!u&&!d&&o(s),h=c||u||d||f,p=h?e(s.length,String):[],m=p.length;for(var g in s)!l&&!a.call(s,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,m))||p.push(g);return p}}function fi(){if(Mn)return Ln;Mn=1;var e=(qn?Pn:(qn=1,Pn=function(e,t){return function(r){return e(t(r))}}))(Object.keys,Object);return Ln=e}function hi(){if(Rn)return Dn;Rn=1;var e=function(){if(Tn)return Sn;Tn=1;var e=Object.prototype;return Sn=function(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||e)}}(),t=fi(),r=Object.prototype.hasOwnProperty;return Dn=function(n){if(!e(n))return t(n);var i=[];for(var o in Object(n))r.call(n,o)&&"constructor"!=o&&i.push(o);return i}}function pi(){if(zn)return Un;zn=1;var e=di(),t=hi(),r=function(){if(Fn)return Bn;Fn=1;var e=Gr(),t=_n();return Bn=function(r){return null!=r&&t(r.length)&&!e(r)}}();return Un=function(n){return r(n)?e(n):t(n)}}function mi(){if($n)return Kn;$n=1;var e=function(){if(Vn)return Hn;Vn=1;var e=ln(),t=cn(),r=pi();return Hn=function(n){return e(n,r,t)}}(),t=Object.prototype.hasOwnProperty;return Kn=function(r,n,i,o,a,s){var l=1&i,c=e(r),u=c.length;if(u!=e(n).length&&!l)return!1;for(var d=u;d--;){var f=c[d];if(!(l?f in n:t.call(n,f)))return!1}var h=s.get(r),p=s.get(n);if(h&&p)return h==n&&p==r;var m=!0;s.set(r,n),s.set(n,r);for(var g=l;++d<u;){var y=r[f=c[d]],b=n[f];if(o)var v=l?o(b,y,f,n,r,s):o(y,b,f,r,n,s);if(!(void 0===v?y===b||a(y,b,i,o,s):v)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var x=r.constructor,j=n.constructor;x==j||!("constructor"in r)||!("constructor"in n)||"function"==typeof x&&x instanceof x&&"function"==typeof j&&j instanceof j||(m=!1)}return s.delete(r),s.delete(n),m}}function gi(){if(ri)return ti;ri=1;var e=function(){if(Wn)return Gn;Wn=1;var e=Zr()(Hr(),"DataView");return Gn=e}(),t=Yr(),r=function(){if(Zn)return Jn;Zn=1;var e=Zr()(Hr(),"Promise");return Jn=e}(),n=function(){if(Qn)return Yn;Qn=1;var e=Zr()(Hr(),"Set");return Yn=e}(),i=function(){if(ei)return Xn;ei=1;var e=Zr()(Hr(),"WeakMap");return Xn=e}(),o=Kr(),a=Jr(),s="[object Map]",l="[object Promise]",c="[object Set]",u="[object WeakMap]",d="[object DataView]",f=a(e),h=a(t),p=a(r),m=a(n),g=a(i),y=o;return(e&&y(new e(new ArrayBuffer(1)))!=d||t&&y(new t)!=s||r&&y(r.resolve())!=l||n&&y(new n)!=c||i&&y(new i)!=u)&&(y=function(e){var t=o(e),r="[object Object]"==t?e.constructor:void 0,n=r?a(r):"";if(n)switch(n){case f:return d;case h:return s;case p:return l;case m:return c;case g:return u}return t}),ti=y}function yi(){if(ai)return oi;ai=1;var e=function(){if(ii)return ni;ii=1;var e=rn(),t=on(),r=an(),n=mi(),i=gi(),o=sn(),a=Nn(),s=ui(),l="[object Arguments]",c="[object Array]",u="[object Object]",d=Object.prototype.hasOwnProperty;return ni=function(f,h,p,m,g,y){var b=o(f),v=o(h),x=b?c:i(f),j=v?c:i(h),I=(x=x==l?u:x)==u,w=(j=j==l?u:j)==u,N=x==j;if(N&&a(f)){if(!a(h))return!1;b=!0,I=!1}if(N&&!I)return y||(y=new e),b||s(f)?t(f,h,p,m,g,y):r(f,h,x,p,m,g,y);if(!(1&p)){var _=I&&d.call(f,"__wrapped__"),k=w&&d.call(h,"__wrapped__");if(_||k){var A=_?f.value():f,C=k?h.value():h;return y||(y=new e),g(A,C,p,m,y)}}return!!N&&(y||(y=new e),n(f,h,p,m,g,y))}}(),t=un();return oi=function r(n,i,o,a,s){return n===i||(null==n||null==i||!t(n)&&!t(i)?n!=n&&i!=i:e(n,i,o,a,r,s))},oi}var bi,vi,xi,ji={exports:{}};
/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */function Ii(){return bi?ji.exports:(bi=1,"undefined"!=typeof self&&self,e=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),i=r(18),o=r(19),a=r(45),s=r(46),l=r(47),c=r(48),u=r(49),d=r(12),f=r(32),h=r(33),p=r(31),m=r(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:n.default,Format:i.default,Leaf:o.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:s.default,Text:u.default,Attributor:{Attribute:d.default,Class:f.default,Style:h.default,Store:p.default}};t.default=g},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return i(t,e),t}(Error);t.ParchmentError=o;var a,s,l={},c={},u={},d={};function f(e,t){var r;if(void 0===t&&(t=a.ANY),"string"==typeof e)r=d[e]||l[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=d.text;else if("number"==typeof e)e&a.LEVEL&a.BLOCK?r=d.block:e&a.LEVEL&a.INLINE&&(r=d.inline);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var i in n)if(r=c[n[i]])break;r=r||u[e.tagName]}return null==r?null:t&a.LEVEL&r.scope&&t&a.TYPE&r.scope?r:null}t.DATA_KEY="__blot",(s=a=t.Scope||(t.Scope={}))[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",t.create=function(e,t){var r=f(e);if(null==r)throw new o("Unable to create "+e+" blot");var n=r,i=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(t);return new n(i,t)},t.find=function e(r,n){return void 0===n&&(n=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:n?e(r.parentNode,n):null},t.query=f,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map(function(t){return e(t)});var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new o("Invalid definition");if("abstract"===n.blotName)throw new o("Cannot register abstract class");return d[n.blotName||n.attrName]=n,"string"==typeof n.keyName?l[n.keyName]=n:(null!=n.className&&(c[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(e){return e.toUpperCase()}):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(e){null!=u[e]&&null!=n.className||(u[e]=n)}))),n}},function(e,t,r){var n=r(51),i=r(11),o=r(3),a=r(20),s=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},l.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=o(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(i(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],r=[];return this.forEach(function(n){(e(n)?t:r).push(n)}),[t,r]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+a.length(t):t.delete?e-t.delete:e},0)},l.prototype.length=function(){return this.reduce(function(e,t){return e+a.length(t)},0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r=[],n=a.iterator(this.ops),i=0;i<t&&n.hasNext();){var o;i<e?o=n.next(e-i):(o=n.next(t-i),r.push(o)),i+=a.length(o)}return new l(r)},l.prototype.compose=function(e){var t=a.iterator(this.ops),r=a.iterator(e.ops),n=[],o=r.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var s=o.retain;"insert"===t.peekType()&&t.peekLength()<=s;)s-=t.peekLength(),n.push(t.next());o.retain-s>0&&r.next(o.retain-s)}for(var c=new l(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),r.peekLength()),d=t.next(u),f=r.next(u);if("number"==typeof f.retain){var h={};"number"==typeof d.retain?h.retain=u:h.insert=d.insert;var p=a.attributes.compose(d.attributes,f.attributes,"number"==typeof d.retain);if(p&&(h.attributes=p),c.push(h),!r.hasNext()&&i(c.ops[c.ops.length-1],h)){var m=new l(t.rest());return c.concat(m).chop()}}else"number"==typeof f.delete&&"number"==typeof d.retain&&c.push(f)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var r=[this,e].map(function(t){return t.map(function(r){if(null!=r.insert)return"string"==typeof r.insert?r.insert:s;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),o=new l,c=n(r[0],r[1],t),u=a.iterator(this.ops),d=a.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case n.INSERT:r=Math.min(d.peekLength(),t),o.push(d.next(r));break;case n.DELETE:r=Math.min(t,u.peekLength()),u.next(r),o.delete(r);break;case n.EQUAL:r=Math.min(u.peekLength(),d.peekLength(),t);var s=u.next(r),l=d.next(r);i(s.insert,l.insert)?o.retain(r,a.attributes.diff(s.attributes,l.attributes)):o.push(l).delete(r)}t-=r}}),o.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var r=a.iterator(this.ops),n=new l,i=0;r.hasNext();){if("insert"!==r.peekType())return;var o=r.peek(),s=a.length(o)-r.peekLength(),c="string"==typeof o.insert?o.insert.indexOf(t,s)-s:-1;if(c<0)n.push(r.next());else if(c>0)n.push(r.next(c));else{if(!1===e(n,r.next(1).attributes||{},i))return;i+=1,n=new l}}n.length()>0&&e(n,{},i)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=a.iterator(this.ops),n=a.iterator(e.ops),i=new l;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())i.push(n.next());else{var o=Math.min(r.peekLength(),n.peekLength()),s=r.next(o),c=n.next(o);if(s.delete)continue;c.delete?i.push(c):i.retain(o,a.attributes.transform(s.attributes,c.attributes,t))}else i.retain(a.length(r.next()));return i.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var r=a.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var i=r.peekLength(),o=r.peekType();r.next(),"delete"!==o?("insert"===o&&(n<e||!t)&&(e+=i),n+=i):e-=Math.min(i,e-n)}return e},e.exports=l},function(e,t){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,i=r.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(t in e);return void 0===t||r.call(e,t)},l=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(o)return o(e,t).value}return e[t]};e.exports=function e(){var t,r,n,i,o,u,d=arguments[0],f=1,h=arguments.length,p=!1;for("boolean"==typeof d&&(p=d,d=arguments[1]||{},f=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});f<h;++f)if(null!=(t=arguments[f]))for(r in t)n=c(d,r),d!==(i=c(t,r))&&(p&&i&&(s(i)||(o=a(i)))?(o?(o=!1,u=n&&a(n)?n:[]):u=n&&s(n)?n:{},l(d,{name:r,newValue:e(p,u,i)})):void 0!==i&&l(d,{name:r,newValue:i}));return d}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=d(r(3)),a=d(r(2)),s=d(r(0)),l=d(r(16)),c=d(r(6)),u=d(r(7));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),n(t,[{key:"attach",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new s.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.default).insert(this.value(),(0,o.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=s.default.query(e,s.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,n){this.format(r,n)}},{key:"insertAt",value:function(e,r,n){if("string"==typeof r&&r.endsWith("\n")){var o=s.default.create(g.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,r.slice(0,-1))}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n)}}]),t}(s.default.Embed);m.scope=s.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){f(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return p(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(s.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),y(t))},new a.default).insert("\n",y(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,n,o){r<=0||(s.default.query(n,s.default.Scope.BLOCK)?e+r===this.length()&&this.format(n,o):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),n,o),this.cache={})}},{key:"insertAt",value:function(e,r,n){if(null!=n)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);if(0!==r.length){var o=r.split("\n"),a=o.shift();a.length>0&&(e<this.length()-1||null==this.children.tail?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});var s=this;o.reduce(function(e,t){return(s=s.split(e,!0)).insertAt(0,t),t.length},e+a.length)}}},{key:"insertBefore",value:function(e,r){var n=this.children.head;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var o=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},o}}]),t}(s.default.Block);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,o.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:y(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,s.default.Embed,u.default],t.bubbleFormats=y,t.BlockEmbed=m,t.default=g},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(50);var a=g(r(2)),s=g(r(14)),l=g(r(8)),c=g(r(9)),u=g(r(0)),d=r(15),f=g(d),h=g(r(3)),p=g(r(10)),m=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=(0,p.default)("quill"),v=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=x(t,n),this.container=this.options.container,null==this.container)return b.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new s.default(this.scroll),this.selection=new f.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e){e===l.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(e,t){var n=r.selection.lastRange,i=n&&0===n.length?n.index:void 0;j.call(r,function(){return r.editor.update(null,t,i)},e)});var o=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+i+"<p><br></p></div>");this.setContents(o),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),p.default.level(e)}},{key:"find",value:function(e){return e.__quill||u.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&b.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var i=e.attrName||e.blotName;"string"==typeof i?this.register("formats/"+i,e,t):Object.keys(e).forEach(function(n){r.register(n,e[n],t)})}else null==this.imports[e]||n||b.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?u.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),o(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var n=this,o=I(e,t,r),a=i(o,4);return e=a[0],t=a[1],r=a[3],j.call(this,function(){return n.editor.deleteText(e,t)},r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return j.call(this,function(){var n=r.getSelection(!0),i=new a.default;if(null==n)return i;if(u.default.query(e,u.default.Scope.BLOCK))i=r.editor.formatLine(n.index,n.length,y({},e,t));else{if(0===n.length)return r.selection.format(e,t),i;i=r.editor.formatText(n.index,n.length,y({},e,t))}return r.setSelection(n,l.default.sources.SILENT),i},n)}},{key:"formatLine",value:function(e,t,r,n,o){var a,s=this,l=I(e,t,r,n,o),c=i(l,4);return e=c[0],t=c[1],a=c[2],o=c[3],j.call(this,function(){return s.editor.formatLine(e,t,a)},o,e,0)}},{key:"formatText",value:function(e,t,r,n,o){var a,s=this,l=I(e,t,r,n,o),c=i(l,4);return e=c[0],t=c[1],a=c[2],o=c[3],j.call(this,function(){return s.editor.formatText(e,t,a)},o,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0;r="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:r.bottom-n.top,height:r.height,left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,width:r.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=I(e,t),n=i(r,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=I(e,t),n=i(r,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,n){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return j.call(this,function(){return i.editor.insertEmbed(t,r,n)},o,t)}},{key:"insertText",value:function(e,t,r,n,o){var a,s=this,l=I(e,0,r,n,o),c=i(l,4);return e=c[0],a=c[2],o=c[3],j.call(this,function(){return s.editor.insertText(e,t,a)},o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var n=this,o=I(e,t,r),a=i(o,4);return e=a[0],t=a[1],r=a[3],j.call(this,function(){return n.editor.removeFormat(e,t)},r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return j.call(this,function(){e=new a.default(e);var r=t.getLength(),n=t.editor.deleteText(0,r),i=t.editor.applyDelta(e),o=i.ops[i.ops.length-1];return null!=o&&"string"==typeof o.insert&&"\n"===o.insert[o.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),i.delete(1)),n.compose(i)},r)}},{key:"setSelection",value:function(t,r,n){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var o=I(t,r,n),a=i(o,4);t=a[0],r=a[1],n=a[3],this.selection.setRange(new d.Range(t,r),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,r=(new a.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return j.call(this,function(){return e=new a.default(e),t.editor.applyDelta(e,r)},r,!0)}}]),e}();function x(e,t){if((t=(0,h.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==v.DEFAULTS.theme){if(t.theme=v.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=m.default;var r=(0,h.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var n=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce(function(e,t){var r=v.import("modules/"+t);return null==r?b.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,h.default)(!0,{},v.DEFAULTS,{modules:n},r,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e},{}),t}function j(e,t,r,n){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new a.default;var i=null==r?null:this.getSelection(),o=this.editor.delta,s=e();if(null!=i&&(!0===r&&(r=i.index),null==n?i=w(i,s,t):0!==n&&(i=w(i,r,n,t)),this.setSelection(i,l.default.sources.SILENT)),s.length()>0){var c,u,d=[l.default.events.TEXT_CHANGE,s,o,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(d)),t!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,d)}return s}function I(e,t,r,i,o){var a={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(o=i,i=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(o=i,i=r,r=t,t=0),"object"===(void 0===r?"undefined":n(r))?(a=r,o=i):"string"==typeof r&&(null!=i?a[r]=i:o=r),[e,t,a,o=o||l.default.sources.API]}function w(e,t,r,n){if(null==e)return null;var o=void 0,s=void 0;if(t instanceof a.default){var c=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,n!==l.default.sources.USER)}),u=i(c,2);o=u[0],s=u[1]}else{var f=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&n===l.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)}),h=i(f,2);o=h[0],s=h[1]}return new d.Range(o,s-o)}v.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},v.events=l.default.events,v.sources=l.default.sources,v.version="1.3.7",v.imports={delta:a.default,parchment:u.default,"core/module":c.default,"core/theme":m.default},t.expandConfig=x,t.overload=I,t.default=v},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=s(r(7)),a=s(r(0));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"formatAt",value:function(e,r,n,o){if(t.compare(this.statics.blotName,n)<0&&a.default.query(n,a.default.Scope.BLOT)){var s=this.isolate(e,r);o&&s.wrap(n,o)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,o)}},{key:"optimize",value:function(e){if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var n=t.order.indexOf(e),i=t.order.indexOf(r);return n>=0||i>=0?n-i:e===r?0:e<r?-1:1}}]),t}(a.default.Inline);l.allowedChildren=[l,a.default.Embed,o.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=i)&&n.__esModule?n:{default:n}).default.Text);t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=a(r(54));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,a(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)})})});var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",s.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(){s.log.apply(s,arguments),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach(function(t){var n=t.node,i=t.handler;(e.target===n||n.contains(e.target))&&i.apply(void 0,[e].concat(r))})}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(o.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};n.DEFAULTS={},t.default=n},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],i="warn";function o(e){if(n.indexOf(e)<=n.indexOf(i)){for(var t,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=console)[e].apply(t,o)}}function a(e){return n.reduce(function(t,r){return t[r]=o.bind(console,r,e),t},{})}o.level=a.level=function(e){i=e},t.default=a},function(e,t,r){var n=Array.prototype.slice,i=r(52),o=r(53),a=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,u;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=n.call(e),t=n.call(t),a(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var d=i(e),f=i(t)}catch(h){return!1}if(d.length!=f.length)return!1;for(d.sort(),f.sort(),c=d.length-1;c>=0;c--)if(d[c]!=f[c])return!1;for(c=d.length-1;c>=0;c--)if(u=d[c],!a(e[u],t[u],r))return!1;return typeof e==typeof t}(e,t,r))};function s(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var i=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&n.Scope.LEVEL|i:this.scope=n.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=d(r(2)),s=d(r(0)),l=d(r(4)),c=d(r(6)),u=d(r(7));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),t}(c.default);m.blotName="code",m.tagName="CODE";var g=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),i(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,r){return t.insert(r).insert("\n",e.formats())},new a.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var i=this.descendant(u.default,this.length()-1),a=n(i,1)[0];null!=a&&a.deleteAt(a.length()-1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,n,i){if(0!==r&&null!=s.default.query(n,s.default.Scope.BLOCK)&&(n!==this.statics.blotName||i!==this.statics.formats(this.domNode))){var o=this.newlineIndex(e);if(!(o<0||o>=e+r)){var a=this.newlineIndex(e,!0)+1,l=o-a+1,c=this.isolate(a,l),u=c.next;c.format(n,i),u instanceof t&&u.formatAt(0,e-a+r-l,n,i)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var i=this.descendant(u.default,e),o=n(i,2),a=o[0],s=o[1];a.insertAt(s,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(s.default.create("text","\n")),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=s.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof s.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=m,t.default=g},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=y(r(2)),s=y(r(20)),l=y(r(0)),c=y(r(13)),u=y(r(24)),d=r(4),f=y(d),h=y(r(16)),p=y(r(21)),m=y(r(11)),g=y(r(3));function y(e){return e&&e.__esModule?e:{default:e}}var b=/^[ -~]*$/,v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return o(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var o=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce(function(e,t){if(1===t.insert){var r=(0,p.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,p.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)},new a.default)}(e)).reduce(function(e,a){var c=a.retain||a.delete||a.insert.length||1,u=a.attributes||{};if(null!=a.insert){if("string"==typeof a.insert){var h=a.insert;h.endsWith("\n")&&r&&(r=!1,h=h.slice(0,-1)),e>=o&&!h.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,h);var p=t.scroll.line(e),m=i(p,2),y=m[0],b=m[1],v=(0,g.default)({},(0,d.bubbleFormats)(y));if(y instanceof f.default){var x=y.descendant(l.default.Leaf,b),j=i(x,1)[0];v=(0,g.default)(v,(0,d.bubbleFormats)(j))}u=s.default.attributes.diff(v,u)||{}}else if("object"===n(a.insert)){var I=Object.keys(a.insert)[0];if(null==I)return e;t.scroll.insertAt(e,I,a.insert[I])}o+=c}return Object.keys(u).forEach(function(r){t.scroll.formatAt(e,c,r,u[r])}),e+c},0),e.reduce(function(e,r){return"number"==typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new a.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach(function(i){if(null==r.scroll.whitelist||r.scroll.whitelist[i]){var o=r.scroll.lines(e,Math.max(t,1)),a=t;o.forEach(function(t){var o=t.length();if(t instanceof c.default){var s=e-t.offset(r.scroll),l=t.newlineIndex(s+a)-s+1;t.formatAt(s,l,i,n[i])}else t.format(i,n[i]);a-=o})}}),this.scroll.optimize(),this.update((new a.default).retain(e).retain(t,(0,p.default)(n)))}},{key:"formatText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach(function(i){r.scroll.formatAt(e,t,i,n[i])}),this.update((new a.default).retain(e).retain(t,(0,p.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new a.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=[];0===t?this.scroll.path(e).forEach(function(e){var t=i(e,1)[0];t instanceof f.default?r.push(t):t instanceof l.default.Leaf&&n.push(t)}):(r=this.scroll.lines(e,t),n=this.scroll.descendants(l.default.Leaf,e,t));var o=[r,n].map(function(e){if(0===e.length)return{};for(var t=(0,d.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=x((0,d.bubbleFormats)(r),t)}return t});return g.default.apply(g.default,o)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new a.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach(function(i){r.scroll.formatAt(e,t.length,i,n[i])}),this.update((new a.default).retain(e).insert(t,(0,p.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===f.default.blotName&&!(e.children.length>1)&&e.children.head instanceof h.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),n=this.scroll.line(e+t),o=i(n,2),s=o[0],l=o[1],u=0,d=new a.default;null!=s&&(u=s instanceof c.default?s.newlineIndex(l)-l+1:s.length()-l,d=s.delta().slice(l,l+u-1).insert("\n"));var f=this.getContents(e,t+u).diff((new a.default).insert(r).concat(d)),h=(new a.default).retain(e).concat(f);return this.applyDelta(h)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(b)&&l.default.find(t[0].target)){var i=l.default.find(t[0].target),o=(0,d.bubbleFormats)(i),s=i.offset(this.scroll),c=t[0].oldValue.replace(u.default.CONTENTS,""),f=(new a.default).insert(c),h=(new a.default).insert(i.value());e=(new a.default).retain(s).concat(f.diff(h,r)).reduce(function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)},new a.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,m.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,r));return e}}]),e}();function x(e,t){return Object.keys(t).reduce(function(r,n){return null==e[n]||(t[n]===e[n]?r[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(r[n]=t[n].concat([e[n]])):r[n]=[t[n],e[n]]),r},{})}t.default=v},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=c(r(0)),a=c(r(21)),s=c(r(11)),l=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=(0,c(r(10)).default)("quill:selection"),h=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.index=t,this.length=r},p=function(){function e(t,r){var n=this;d(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=o.default.create("cursor",this),this.lastRange=this.savedRange=new h(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)}),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&n.update(l.default.sources.SILENT)}),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}})}}),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var r=t.range,i=r.startNode,o=r.startOffset,a=r.endNode,s=r.endOffset;n.setNativeRange(i,o,a,s)}}),this.update(l.default.sources.SILENT)}return i(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(l.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!o.default.query(e,o.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var n=o.default.find(r.start.node,!1);if(null==n)return;if(n instanceof o.default.Leaf){var i=n.split(r.start.offset);n.parent.insertBefore(this.cursor,i)}else n.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var i=void 0,o=this.scroll.leaf(e),a=n(o,2),s=a[0],l=a[1];if(null==s)return null;var c=s.position(l,!0),u=n(c,2);i=u[0],l=u[1];var d=document.createRange();if(t>0){d.setStart(i,l);var f=this.scroll.leaf(e+t),h=n(f,2);if(s=h[0],l=h[1],null==s)return null;var p=s.position(l,!0),m=n(p,2);return i=m[0],l=m[1],d.setEnd(i,l),d.getBoundingClientRect()}var g="left",y=void 0;return i instanceof Text?(l<i.data.length?(d.setStart(i,l),d.setEnd(i,l+1)):(d.setStart(i,l-1),d.setEnd(i,l),g="right"),y=d.getBoundingClientRect()):(y=s.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:y.top+y.height,height:y.height,left:y[g],right:y[g],top:y.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return f.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var i=r.map(function(e){var r=n(e,2),i=r[0],a=r[1],s=o.default.find(i,!0),l=s.offset(t.scroll);return 0===a?l:s instanceof o.default.Container?l+s.length():l+s.index(i,a)}),a=Math.min(Math.max.apply(Math,u(i)),this.scroll.length()-1),s=Math.min.apply(Math,[a].concat(u(i)));return new h(s,a-s)}},{key:"normalizeNative",value:function(e){if(!m(this.root,e.startContainer)||!e.collapsed&&!m(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r}),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],i=[],o=this.scroll.length();return r.forEach(function(e,r){e=Math.min(o-1,e);var a,s=t.scroll.leaf(e),l=n(s,2),c=l[0],u=l[1],d=c.position(u,0!==r),f=n(d,2);a=f[0],u=f[1],i.push(a,u)}),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var i=this.scroll.length()-1,o=this.scroll.line(Math.min(t.index,i)),a=n(o,1)[0],s=a;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,i));s=n(l,1)[0]}if(null!=a&&null!=s){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f.info("setNativeRange",e,t,r,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var o=document.getSelection();if(null!=o)if(null!=e){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||i||e!==a.startContainer||t!==a.startOffset||r!==a.endContainer||n!==a.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(n=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var s=document.createRange();s.setStart(e,t),s.setEnd(r,n),o.removeAllRanges(),o.addRange(s)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(r=t,t=!1),f.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,u(n).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,r=this.getRange(),i=n(r,2),o=i[0],c=i[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,s.default)(t,this.lastRange)){var u;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var d,f=[l.default.events.SELECTION_CHANGE,(0,a.default)(this.lastRange),(0,a.default)(t),e];(u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(f)),e!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,f)}}}]),e}();function m(e,t){try{t.parentNode}catch(r){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=h,t.default=p},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(0),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"insertInto",value:function(e,r){0===e.children.length?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default.Embed);s.blotName="break",s.tagName="BR",t.default=s},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(44),a=r(30),s=r(1),l=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return i(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var r=c(t);e.insertBefore(r,e.children.head||void 0)}catch(n){if(n instanceof s.ParchmentError)return;throw n}})},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,r){e.deleteAt(t,r)})},t.prototype.descendant=function(e,r){var n=this.children.find(r),i=n[0],o=n[1];return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,o]:i instanceof t?i.descendant(e,o):[null,-1]},t.prototype.descendants=function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=Number.MAX_VALUE);var i=[],o=n;return this.children.forEachAt(r,n,function(r,n,a){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&i.push(r),r instanceof t&&(i=i.concat(r.descendants(e,n,o))),o-=a}),i},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,n){this.children.forEachAt(e,t,function(e,t,i){e.formatAt(t,i,r,n)})},t.prototype.insertAt=function(e,t,r){var n=this.children.find(e),i=n[0],o=n[1];if(i)i.insertAt(o,t,r);else{var a=null==r?s.create("text",t):s.create(t,r);this.appendChild(a)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new s.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(r){e.insertBefore(r,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=s.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var n=this.children.find(e,r),i=n[0],o=n[1],a=[[this,e]];return i instanceof t?a.concat(i.path(o,r)):(null!=i&&a.push([i,o]),a)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),function(e,n,i){e=e.split(n,t),r.appendChild(e)}),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,n=[],i=[];e.forEach(function(e){e.target===r.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),i.push.apply(i,e.removedNodes))}),i.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=s.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}}),n.filter(function(e){return e.parentNode==r.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null;null!=e.nextSibling&&(t=s.find(e.nextSibling));var n=c(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(r),r.insertBefore(n,t||void 0))})},t}(a.default);function c(e){var t=s.find(e);if(null==t)try{t=s.create(e)}catch(r){t=s.create(s.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(12),a=r(31),s=r(17),l=r(1),c=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new a.default(r.domNode),r}return i(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=l.query(e);r instanceof o.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var n=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(n),n},t.prototype.update=function(t,r){var n=this;e.prototype.update.call(this,t,r),t.some(function(e){return e.target===n.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(r,n){var i=e.prototype.wrap.call(this,r,n);return i instanceof t&&i.statics.scope===this.statics.scope&&this.attributes.move(i),i},t}(s.default);t.default=c},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(30),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=a.Scope.INLINE_BLOT,t}(o.default);t.default=s},function(e,t,r){var n=r(11),i=r(3),o={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=i(!0,{},t);for(var o in r||(n=Object.keys(n).reduce(function(e,t){return null!=n[t]&&(e[t]=n[t]),e},{})),e)void 0!==e[o]&&void 0===t[o]&&(n[o]=e[o]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce(function(r,i){return n(e[i],t[i])||(r[i]=void 0===t[i]?null:t[i]),r},{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!=typeof e)return t;if("object"==typeof t){if(!r)return t;var n=Object.keys(t).reduce(function(r,n){return void 0===e[n]&&(r[n]=t[n]),r},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new a(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function a(e){this.ops=e,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,n=o.length(t);if(e>=n-r?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var i={};return t.attributes&&(i.attributes=t.attributes),"number"==typeof t.retain?i.retain=e:"string"==typeof t.insert?i.insert=t.insert.substr(r,e):i.insert=t.insert,i}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=o},function(e,t){var r=function(){function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(s){t=function(){}}try{r=Set}catch(s){r=function(){}}try{n=Promise}catch(s){n=function(){}}function i(o,s,l,c,u){"object"==typeof s&&(l=s.depth,c=s.prototype,u=s.includeNonEnumerable,s=s.circular);var d=[],f=[],h="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===l&&(l=1/0),function o(l,p){if(null===l)return null;if(0===p)return l;var m,g;if("object"!=typeof l)return l;if(e(l,t))m=new t;else if(e(l,r))m=new r;else if(e(l,n))m=new n(function(e,t){l.then(function(t){e(o(t,p-1))},function(e){t(o(e,p-1))})});else if(i.__isArray(l))m=[];else if(i.__isRegExp(l))m=new RegExp(l.source,a(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(i.__isDate(l))m=new Date(l.getTime());else{if(h&&Buffer.isBuffer(l))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(m),m;e(l,Error)?m=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),m=Object.create(g)):(m=Object.create(c),g=c)}if(s){var y=d.indexOf(l);if(-1!=y)return f[y];d.push(l),f.push(m)}for(var b in e(l,t)&&l.forEach(function(e,t){var r=o(t,p-1),n=o(e,p-1);m.set(r,n)}),e(l,r)&&l.forEach(function(e){var t=o(e,p-1);m.add(t)}),l){var v;g&&(v=Object.getOwnPropertyDescriptor(g,b)),v&&null==v.set||(m[b]=o(l[b],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(b=0;b<x.length;b++){var j=x[b];(!(w=Object.getOwnPropertyDescriptor(l,j))||w.enumerable||u)&&(m[j]=o(l[j],p-1),w.enumerable||Object.defineProperty(m,j,{enumerable:!1}))}}if(u){var I=Object.getOwnPropertyNames(l);for(b=0;b<I.length;b++){var w,N=I[b];(w=Object.getOwnPropertyDescriptor(l,N))&&w.enumerable||(m[N]=o(l[N],p-1),Object.defineProperty(m,N,{enumerable:!1}))}}return m}(o,l)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=h(r(0)),s=h(r(8)),l=r(4),c=h(l),u=h(r(16)),d=h(r(13)),f=h(r(25));function h(e){return e&&e.__esModule?e:{default:e}}function p(e){return e instanceof c.default||e instanceof l.BlockEmbed}var m=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=r.emitter,Array.isArray(r.whitelist)&&(n.whitelist=r.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),n.domNode.addEventListener("DOMNodeInserted",function(){}),n.optimize(),n.enable(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var i=this.line(e),a=n(i,2),s=a[0],c=a[1],f=this.line(e+r),h=n(f,1)[0];if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=h&&s!==h&&c>0){if(s instanceof l.BlockEmbed||h instanceof l.BlockEmbed)return void this.optimize();if(s instanceof d.default){var p=s.newlineIndex(s.length(),!0);if(p>-1&&(s=s.split(p+1))===h)return void this.optimize()}else if(h instanceof d.default){var m=h.newlineIndex(0);m>-1&&h.split(m+1)}var g=h.children.head instanceof u.default?null:h.children.head;s.moveChildren(h,g),s.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,n,i){(null==this.whitelist||this.whitelist[n])&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,i),this.optimize())}},{key:"insertAt",value:function(e,r,n){if(null==n||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==n||null==a.default.query(r,a.default.Scope.BLOCK)){var i=a.default.create(this.statics.defaultChild);this.appendChild(i),null==n&&r.endsWith("\n")&&(r=r.slice(0,-1)),i.insertAt(0,r,n)}else{var s=a.default.create(r,n);this.appendChild(s)}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===a.default.Scope.INLINE_BLOT){var n=a.default.create(this.statics.defaultChild);n.appendChild(e),e=n}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(p,e)}},{key:"lines",value:function(){return function e(t,r,n){var i=[],o=n;return t.children.forEachAt(r,n,function(t,r,n){p(t)?i.push(t):t instanceof a.default.Container&&(i=i.concat(e(t,r,o))),o-=n}),i}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(s.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=s.default.sources.USER;"string"==typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(s.default.events.SCROLL_BEFORE_UPDATE,r,e),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(s.default.events.SCROLL_UPDATE,r,e)}}}]),t}(a.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[c.default,l.BlockEmbed,f.default],t.default=m},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=m(r(21)),s=m(r(11)),l=m(r(3)),c=m(r(2)),u=m(r(20)),d=m(r(0)),f=m(r(5)),h=m(r(10)),p=m(r(9));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,h.default)("quill:keyboard"),b=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",v=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.bindings={},Object.keys(n.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])}),n.addBinding({key:t.keys.ENTER,shiftKey:null},N),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},j),n.addBinding({key:t.keys.DELETE},{collapsed:!0},I)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},j),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},I)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},w),n.addBinding({key:t.keys.DELETE},{collapsed:!1},w),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},j),n.listen(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"match",value:function(e,t){return t=A(t),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(r){return!!t[r]!==e[r]&&null!==t[r]})&&t.key===(e.which||e.keyCode)}}]),o(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=A(e);if(null==n||null==n.key)return y.warn("Attempted to add invalid keyboard binding",n);"function"==typeof t&&(t={handler:t}),"function"==typeof r&&(r={handler:r}),n=(0,l.default)(n,t,r),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(r){if(!r.defaultPrevented){var o=r.which||r.keyCode,a=(e.bindings[o]||[]).filter(function(e){return t.match(r,e)});if(0!==a.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),u=i(c,2),f=u[0],h=u[1],p=e.quill.getLeaf(l.index),m=i(p,2),g=m[0],y=m[1],b=0===l.length?[g,y]:e.quill.getLeaf(l.index+l.length),v=i(b,2),x=v[0],j=v[1],I=g instanceof d.default.Text?g.value().slice(0,y):"",w=x instanceof d.default.Text?x.value().slice(j):"",N={collapsed:0===l.length,empty:0===l.length&&f.length()<=1,format:e.quill.getFormat(l),offset:h,prefix:I,suffix:w};a.some(function(t){if(null!=t.collapsed&&t.collapsed!==N.collapsed)return!1;if(null!=t.empty&&t.empty!==N.empty)return!1;if(null!=t.offset&&t.offset!==N.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==N.format[e]}))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=N.format[e]:!1===t.format[e]?null==N.format[e]:(0,s.default)(t.format[e],N.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(N.prefix)||null!=t.suffix&&!t.suffix.test(N.suffix)||!0===t.handler.call(e,l,N))})&&r.preventDefault()}}}})}}]),t}(p.default);function x(e,t){var r,n=e===v.keys.LEFT?"prefix":"suffix";return g(r={key:e,shiftKey:t,altKey:null},n,/^$/),g(r,"handler",function(r){var n=r.index;e===v.keys.RIGHT&&(n+=r.length+1);var o=this.quill.getLeaf(n);return!(i(o,1)[0]instanceof d.default.Embed&&(e===v.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,f.default.sources.USER):this.quill.setSelection(r.index-1,f.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,f.default.sources.USER):this.quill.setSelection(r.index+r.length+1,f.default.sources.USER),1))}),r}function j(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),n=i(r,1)[0],o={};if(0===t.offset){var a=this.quill.getLine(e.index-1),s=i(a,1)[0];if(null!=s&&s.length()>1){var l=n.formats(),c=this.quill.getFormat(e.index-1,1);o=u.default.attributes.diff(l,c)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-d,d,f.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(e.index-d,d,o,f.default.sources.USER),this.quill.focus()}}function I(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var n={},o=0,a=this.quill.getLine(e.index),s=i(a,1)[0];if(t.offset>=s.length()-1){var l=this.quill.getLine(e.index+1),c=i(l,1)[0];if(c){var d=s.formats(),h=this.quill.getFormat(e.index,1);n=u.default.attributes.diff(d,h)||{},o=c.length()}}this.quill.deleteText(e.index,r,f.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+o-1,r,n,f.default.sources.USER)}}function w(e){var t=this.quill.getLines(e),r={};if(t.length>1){var n=t[0].formats(),i=t[t.length-1].formats();r=u.default.attributes.diff(i,n)||{}}this.quill.deleteText(e,f.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,f.default.sources.USER),this.quill.setSelection(e.index,f.default.sources.SILENT),this.quill.focus()}function N(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce(function(e,r){return d.default.query(r,d.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e},{});this.quill.insertText(e.index,"\n",n,f.default.sources.USER),this.quill.setSelection(e.index+1,f.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],f.default.sources.USER))})}function _(e){return{key:v.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=d.default.query("code-block"),n=t.index,o=t.length,a=this.quill.scroll.descendant(r,n),s=i(a,2),l=s[0],c=s[1];if(null!=l){var u=this.quill.getIndex(l),h=l.newlineIndex(c,!0)+1,p=l.newlineIndex(u+c+o),m=l.domNode.textContent.slice(h,p).split("\n");c=0,m.forEach(function(t,i){e?(l.insertAt(h+c,r.TAB),c+=r.TAB.length,0===i?n+=r.TAB.length:o+=r.TAB.length):t.startsWith(r.TAB)&&(l.deleteAt(h+c,r.TAB.length),c-=r.TAB.length,0===i?n-=r.TAB.length:o-=r.TAB.length),c+=t.length+1}),this.quill.update(f.default.sources.USER),this.quill.setSelection(n,o,f.default.sources.SILENT)}}}}function k(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],f.default.sources.USER)}}}function A(e){if("string"==typeof e||"number"==typeof e)return A({key:e});if("object"===(void 0===e?"undefined":n(e))&&(e=(0,a.default)(e,!1)),"string"==typeof e.key)if(null!=v.keys[e.key.toUpperCase()])e.key=v.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[b]=e.shortKey,delete e.shortKey),e}v.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},v.DEFAULTS={bindings:{bold:k("bold"),italic:k("italic"),underline:k("underline"),indent:{key:v.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",f.default.sources.USER)}},outdent:{key:v.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",f.default.sources.USER)}},"outdent backspace":{key:v.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",f.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,f.default.sources.USER)}},"indent code-block":_(!0),"outdent code-block":_(!1),"remove tab":{key:v.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,f.default.sources.USER)}},tab:{key:v.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,f.default.sources.SILENT)}},"list empty enter":{key:v.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,f.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,f.default.sources.USER)}},"checklist enter":{key:v.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=i(t,2),n=r[0],o=r[1],a=(0,l.default)({},n.formats(),{list:"checked"}),s=(new c.default).retain(e.index).insert("\n",a).retain(n.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,f.default.sources.USER),this.quill.setSelection(e.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:v.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),n=i(r,2),o=n[0],a=n[1],s=(new c.default).retain(e.index).insert("\n",t.format).retain(o.length()-a-1).retain(1,{header:null});this.quill.updateContents(s,f.default.sources.USER),this.quill.setSelection(e.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,n=this.quill.getLine(e.index),o=i(n,2),a=o[0],s=o[1];if(s>r)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",f.default.sources.USER),this.quill.history.cutoff();var u=(new c.default).retain(e.index-s).delete(r+1).retain(a.length()-2-s).retain(1,{list:l});this.quill.updateContents(u,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,f.default.sources.SILENT)}},"code exit":{key:v.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=i(t,2),n=r[0],o=r[1],a=(new c.default).retain(e.index+n.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(a,f.default.sources.USER)}},"embed left":x(v.keys.LEFT,!1),"embed left shift":x(v.keys.LEFT,!0),"embed right":x(v.keys.RIGHT,!1),"embed right shift":x(v.keys.RIGHT,!0)}},t.default=v,t.SHORTKEY=b},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(0)),s=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=r,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"value",value:function(){}}]),o(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var n=this,o=0;null!=n&&n.statics.scope!==a.default.Scope.BLOCK_BLOT;)o+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=t.CONTENTS.length,n.optimize(),n.formatAt(o,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),i=void 0,o=void 0,l=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var c=[e,r.start.offset,r.end.offset];i=c[0],o=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var u=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof s.default?(i=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=t.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var d=[o,l].map(function(e){return Math.max(0,Math.min(i.data.length,e-1))}),f=n(d,2);return o=f[0],l=f[1],{startNode:i,startOffset:o,endNode:i,endOffset:l}}}}},{key:"update",value:function(e,t){var r=this;if(e.some(function(e){return"characterData"===e.type&&e.target===r.textNode})){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(a.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(0)),i=r(4),o=a(i);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default.Container);s.allowedChildren=[o.default,i.BlockEmbed,s],t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?"#"+(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join(""):r}}]),t}(s.default.Attributor.Style),c=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),u=new l("color","color",{scope:s.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=c,t.ColorStyle=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);function l(e,t){var r=document.createElement("a");r.href=e;var n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}s.blotName="link",s.tagName="A",s.SANITIZED_URL="about:blank",s.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=s,t.sanitize=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=s(r(23)),a=s(r(107));function s(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var u=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){r.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case o.default.keys.ENTER:r.togglePicker();break;case o.default.keys.ESCAPE:r.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return i(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",function(){t.selectItem(r,!0)}),r.addEventListener("keydown",function(e){switch(e.keyCode){case o.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case o.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=a.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(r){var n=e.buildItem(r);t.appendChild(n),!0===r.selected&&e.selectItem(n)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":n(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=y(r(0)),i=y(r(5)),o=r(4),a=y(o),s=y(r(16)),l=y(r(25)),c=y(r(24)),u=y(r(35)),d=y(r(6)),f=y(r(22)),h=y(r(7)),p=y(r(55)),m=y(r(42)),g=y(r(23));function y(e){return e&&e.__esModule?e:{default:e}}i.default.register({"blots/block":a.default,"blots/block/embed":o.BlockEmbed,"blots/break":s.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":u.default,"blots/inline":d.default,"blots/scroll":f.default,"blots/text":h.default,"modules/clipboard":p.default,"modules/history":m.default,"modules/keyboard":g.default}),n.default.register(a.default,s.default,c.default,d.default,f.default,h.default),t.default=i.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,i){var o=this.isolate(e,t);if(null!=n.query(r,n.Scope.BLOT)&&i)o.wrap(r,i);else if(null!=n.query(r,n.Scope.ATTRIBUTE)){var a=n.create(this.statics.scope);o.wrap(a),a.format(r,i)}},e.prototype.insertAt=function(e,t,r){var i=null==r?n.create("text",t):n.create(t,r),o=this.split(e);this.parent.insertBefore(i,o)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"==typeof e?n.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"==typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),i=r(32),o=r(33),a=r(1),s=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),r=i.default.keys(this.domNode),s=o.default.keys(this.domNode);t.concat(r).concat(s).forEach(function(t){var r=a.query(t,a.Scope.ATTRIBUTE);r instanceof n.default&&(e.attributes[r.attrName]=r)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(r){var n=t.attributes[r].value(t.domNode);e.format(r,n)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,r){return t[r]=e.attributes[r].value(e.domNode),t},{})},e}();t.default=s},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function o(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){o(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(o(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function o(e){var t=e.split("-"),r=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[o(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[o(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[o(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();i.DEFAULTS={modules:{}},i.themes={default:i},t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=s(r(0)),a=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(e){r.contentNode.appendChild(e)}),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,n=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof a.default){var i=this.prev.length();this.prev.insertAt(i,n),t={startNode:this.prev.domNode,startOffset:i+n.length}}else r=document.createTextNode(n),this.parent.insertBefore(o.default.create(r),this),t={startNode:r,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof a.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(r=document.createTextNode(n),this.parent.insertBefore(o.default.create(r),this.next),t={startNode:r,startOffset:n.length}));return e.data=l,t}},{key:"update",value:function(e,t){var r=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var n=r.restore(e.target);n&&(t.range=n)}})}}]),t}(o.default.Embed);t.default=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n,i=r(0),o=(n=i)&&n.__esModule?n:{default:n},a={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},s=new o.default.Attributor.Attribute("align","align",a),l=new o.default.Attributor.Class("align","ql-align",a),c=new o.default.Attributor.Style("align","text-align",a);t.AlignAttribute=s,t.AlignClass=l,t.AlignStyle=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n,i=r(0),o=(n=i)&&n.__esModule?n:{default:n},a=r(26),s=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),l=new a.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});t.BackgroundClass=s,t.BackgroundStyle=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n,i=r(0),o=(n=i)&&n.__esModule?n:{default:n},a={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},s=new o.default.Attributor.Attribute("direction","dir",a),l=new o.default.Attributor.Class("direction","ql-direction",a),c=new o.default.Attributor.Style("direction","direction",a);t.DirectionAttribute=s,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new s.default.Attributor.Class("font","ql-font",l),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(s.default.Attributor.Style),d=new u("font","font-family",l);t.FontStyle=d,t.FontClass=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n,i=r(0),o=(n=i)&&n.__esModule?n:{default:n},a=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),s=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=a,t.SizeStyle=s},function(e,t,r){e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(0)),o=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(o.default.events.EDITOR_CHANGE,function(e,t,r,i){e!==o.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&i!==o.default.sources.USER?n.transform(t):n.record(t,r))}),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],o.default.sources.USER),this.ignoreChange=!1;var n=l(r[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var i=this.stack.undo.pop();r=r.compose(i.undo),e=i.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(a(r(9)).default);function l(e){var t=e.reduce(function(e,t){return e+=t.delete||0},0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=i.default.query(e,i.default.Scope.BLOCK)}))}(e)&&(r-=1),r}s.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=s,t.getLastChangeIndex=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=p(r(3)),a=p(r(2)),s=p(r(8)),l=p(r(23)),c=p(r(34)),u=p(r(59)),d=p(r(60)),f=p(r(28)),h=p(r(61));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[!1,"center","right","justify"],v=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],j=["1","2","3",!1],I=["small",!1,"large","huge"],w=function(e){function t(e,r){m(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(r.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(e){e.container.contains(r.target)||e.close()})}),n}return y(t,e),n(t,[{key:"addModule",value:function(e){var r=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){(e.getAttribute("class")||"").split(/\s+/).forEach(function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"==typeof t[r])e.innerHTML=t[r];else{var n=e.value||"";null!=n&&t[r][n]&&(e.innerHTML=t[r][n])}})})}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&_(e,b),new d.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&_(e,v,"background"===r?"#ffffff":"#000000"),new u.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?_(e,x):e.classList.contains("ql-header")?_(e,j):e.classList.contains("ql-size")&&_(e,I)),new f.default(e)}),this.quill.on(s.default.events.EDITOR_CHANGE,function(){r.pickers.forEach(function(e){e.update()})})}}]),t}(c.default);w.DEFAULTS=(0,o.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var n=e.quill.getSelection(!0);e.quill.updateContents((new a.default).retain(n.index).delete(n.length).insert({image:r.target.result}),s.default.sources.USER),e.quill.setSelection(n.index+1,s.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var N=function(e){function t(e,r){m(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return y(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,r=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var n=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",r,s.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",r,s.default.sources.USER)),this.quill.root.scrollTop=n;break;case"video":r=(t=(e=r).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!r)break;var i=this.quill.getSelection(!0);if(null!=i){var o=i.index+i.length;this.quill.insertEmbed(o,this.root.getAttribute("data-mode"),r,s.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(o+1," ",s.default.sources.USER),this.quill.setSelection(o+2,s.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(h.default);function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var n=document.createElement("option");t===r?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)})}t.BaseTooltip=N,t.default=w},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,n=this.iterator();r=n();){var i=r.length();if(e<i||t&&e===i&&(null==r.next||0!==r.next.length()))return[r,e];e-=i}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var n,i=this.find(e),o=i[0],a=e-i[1],s=this.iterator(o);(n=s())&&a<e+t;){var l=n.length();e>a?r(n,e-a,Math.min(t,a+l-e)):r(n,0,Math.min(l,e+t-a)),a+=l}},e.prototype.map=function(e){return this.reduce(function(t,r){return t.push(e(r)),t},[])},e.prototype.reduce=function(e,t){for(var r,n=this.iterator();r=n();)t=e(t,r);return t},e}();t.default=n},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(17),a=r(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver(function(e){r.update(e)}),r.observer.observe(r.domNode,s),r.attach(),r}return i(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,n,i){this.update(),e.prototype.formatAt.call(this,t,r,n,i)},t.prototype.insertAt=function(t,r,n){this.update(),e.prototype.insertAt.call(this,t,r,n)},t.prototype.optimize=function(t,r){var n=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var i=[].slice.call(this.observer.takeRecords());i.length>0;)t.push(i.pop());for(var s=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[a.DATA_KEY].mutations&&(e.domNode[a.DATA_KEY].mutations=[]),t&&s(e.parent))},l=function(e){null!=e.domNode[a.DATA_KEY]&&null!=e.domNode[a.DATA_KEY].mutations&&(e instanceof o.default&&e.children.forEach(l),e.optimize(r))},c=t,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(e){var t=a.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(s(a.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=a.find(e,!1);s(t,!1),t instanceof o.default&&t.children.forEach(function(e){s(e,!1)})})):"attributes"===e.type&&s(t.prev)),s(t))}),this.children.forEach(l),i=(c=[].slice.call(this.observer.takeRecords())).slice();i.length>0;)t.push(i.pop())}},t.prototype.update=function(t,r){var n=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map(function(e){var t=a.find(e.target,!0);return null==t?null:null==t.domNode[a.DATA_KEY].mutations?(t.domNode[a.DATA_KEY].mutations=[e],t):(t.domNode[a.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==n&&null!=e.domNode[a.DATA_KEY]&&e.update(e.domNode[a.DATA_KEY].mutations||[],r)}),null!=this.domNode[a.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="DIV",t}(o.default);t.default=l},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(18),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,n){var i=this;r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):(this.children.forEach(function(e){e instanceof o.default||(e=e.wrap(t.blotName,!0)),i.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,r,n,i){null!=this.formats()[n]||a.query(n,a.Scope.ATTRIBUTE)?this.isolate(t,r).format(n,i):e.prototype.formatAt.call(this,t,r,n,i)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var i=this.next;i instanceof t&&i.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(n,i.formats())&&(i.moveChildren(this),i.remove())},t.blotName="inline",t.scope=a.Scope.INLINE_BLOT,t.tagName="SPAN",t}(o.default);t.default=s},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(18),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.formats=function(r){var n=a.query(t.blotName).tagName;if(r.tagName!==n)return e.formats.call(this,r)},t.prototype.format=function(r,n){null!=a.query(r,a.Scope.BLOCK)&&(r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,n,i){null!=a.query(n,a.Scope.BLOCK)?this.format(n,i):e.prototype.formatAt.call(this,t,r,n,i)},t.prototype.insertAt=function(t,r,n){if(null==n||null!=a.query(r,a.Scope.INLINE))e.prototype.insertAt.call(this,t,r,n);else{var i=this.split(t),o=a.create(r,n);i.parent.insertBefore(o,i)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="P",t}(o.default);t.default=s},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,n,i){0===t&&r===this.length()?this.format(n,i):e.prototype.formatAt.call(this,t,r,n,i)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=o},function(e,t,r){var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(19),a=r(1),s=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return i(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,n){null==n?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=a.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=a.Scope.INLINE_BLOT,t}(o.default);t.default=s},function(e,t,r){var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:i.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,i=arguments[1],o=0;o<n;o++)if(t=r[o],e.call(i,t,o,r))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var r=-1;function n(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var u=o(e,t),d=e.substring(0,u);u=a(e=e.substring(u),t=t.substring(u));var f=e.substring(e.length-u),h=function(e,t){var s;if(!e)return[[1,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return s=[[1,l.substring(0,u)],[0,c],[1,l.substring(u+c.length)]],e.length>t.length&&(s[0][0]=s[2][0]=r),s;if(1==c.length)return[[r,e],[1,t]];var d=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function i(e,t,r){for(var n,i,s,l,c=e.substring(r,r+Math.floor(e.length/4)),u=-1,d="";-1!=(u=t.indexOf(c,u+1));){var f=o(e.substring(r),t.substring(u)),h=a(e.substring(0,r),t.substring(0,u));d.length<h+f&&(d=t.substring(u-h,u)+t.substring(u,u+f),n=e.substring(0,r-h),i=e.substring(r+f),s=t.substring(0,u-h),l=t.substring(u+f))}return 2*d.length>=e.length?[n,i,s,l,d]:null}var s,l,c,u,d,f=i(r,n,Math.ceil(r.length/4)),h=i(r,n,Math.ceil(r.length/2));if(!f&&!h)return null;s=h?f&&f[4].length>h[4].length?f:h:f,e.length>t.length?(l=s[0],c=s[1],u=s[2],d=s[3]):(u=s[0],d=s[1],l=s[2],c=s[3]);var p=s[4];return[l,c,u,d,p]}(e,t);if(d){var f=d[0],h=d[1],p=d[2],m=d[3],g=d[4],y=n(f,p),b=n(h,m);return y.concat([[0,g]],b)}return function(e,t){for(var n=e.length,o=t.length,a=Math.ceil((n+o)/2),s=a,l=2*a,c=new Array(l),u=new Array(l),d=0;d<l;d++)c[d]=-1,u[d]=-1;c[s+1]=0,u[s+1]=0;for(var f=n-o,h=f%2!=0,p=0,m=0,g=0,y=0,b=0;b<a;b++){for(var v=-b+p;v<=b-m;v+=2){for(var x=s+v,j=(k=v==-b||v!=b&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-v;k<n&&j<o&&e.charAt(k)==t.charAt(j);)k++,j++;if(c[x]=k,k>n)m+=2;else if(j>o)p+=2;else if(h&&(N=s+f-v)>=0&&N<l&&-1!=u[N]&&k>=(w=n-u[N]))return i(e,t,k,j)}for(var I=-b+g;I<=b-y;I+=2){for(var w,N=s+I,_=(w=I==-b||I!=b&&u[N-1]<u[N+1]?u[N+1]:u[N-1]+1)-I;w<n&&_<o&&e.charAt(n-w-1)==t.charAt(o-_-1);)w++,_++;if(u[N]=w,w>n)y+=2;else if(_>o)g+=2;else if(!h){var k;if((x=s+f-I)>=0&&x<l&&-1!=c[x]&&(j=s+(k=c[x])-x,k>=(w=n-w)))return i(e,t,k,j)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-u),t=t.substring(0,t.length-u));return d&&h.unshift([0,d]),f&&h.push([0,f]),s(h),null!=l&&(h=function(e,t){var n=function(e,t){if(0===t)return[0,e];for(var n=0,i=0;i<e.length;i++){var o=e[i];if(o[0]===r||0===o[0]){var a=n+o[1].length;if(t===a)return[i+1,e];if(t<a){e=e.slice();var s=t-n,l=[o[0],o[1].slice(0,s)],c=[o[0],o[1].slice(s)];return e.splice(i,1,l,c),[i+1,e]}n=a}}throw new Error("cursor_pos is out of bounds!")}(e,t),i=n[1],o=n[0],a=i[o],s=i[o+1];if(null==a)return e;if(0!==a[0])return e;if(null!=s&&a[1]+s[1]===s[1]+a[1])return i.splice(o,2,s,a),c(i,o,2);if(null!=s&&0===s[1].indexOf(a[1])){i.splice(o,2,[s[0],a[1]],[0,a[1]]);var l=s[1].slice(a[1].length);return l.length>0&&i.splice(o+2,0,[s[0],l]),c(i,o,3)}return e}(h,l)),h=function(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},i=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},o=2;o<e.length;o+=1)0===e[o-2][0]&&i(e[o-2][1])&&e[o-1][0]===r&&n(e[o-1][1])&&1===e[o][0]&&n(e[o][1])&&(t=!0,e[o-1][1]=e[o-2][1].slice(-1)+e[o-1][1],e[o][1]=e[o-2][1].slice(-1)+e[o][1],e[o-2][1]=e[o-2][1].slice(0,-1));if(!t)return e;var a=[];for(o=0;o<e.length;o+=1)e[o][1].length>0&&a.push(e[o]);return a}(h)}function i(e,t,r,i){var o=e.substring(0,r),a=t.substring(0,i),s=e.substring(r),l=t.substring(i),c=n(o,a),u=n(s,l);return c.concat(u)}function o(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,o=0;r<i;)e.substring(o,i)==t.substring(o,i)?o=r=i:n=i,i=Math.floor((n-r)/2+r);return i}function a(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),i=n,o=0;r<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=r=i:n=i,i=Math.floor((n-r)/2+r);return i}function s(e){e.push([0,""]);for(var t,n=0,i=0,l=0,c="",u="";n<e.length;)switch(e[n][0]){case 1:l++,u+=e[n][1],n++;break;case r:i++,c+=e[n][1],n++;break;case 0:i+l>1?(0!==i&&0!==l&&(0!==(t=o(u,c))&&(n-i-l>0&&0==e[n-i-l-1][0]?e[n-i-l-1][1]+=u.substring(0,t):(e.splice(0,0,[0,u.substring(0,t)]),n++),u=u.substring(t),c=c.substring(t)),0!==(t=a(u,c))&&(e[n][1]=u.substring(u.length-t)+e[n][1],u=u.substring(0,u.length-t),c=c.substring(0,c.length-t))),0===i?e.splice(n-l,i+l,[1,u]):0===l?e.splice(n-i,i+l,[r,c]):e.splice(n-i-l,i+l,[r,c],[1,u]),n=n-i-l+(i?1:0)+(l?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,i=0,c="",u=""}""===e[e.length-1][1]&&e.pop();var d=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),d=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),d=!0)),n++;d&&s(e)}var l=n;function c(e,t,r){for(var n=t+r-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var i=e[n],o=e[n+1];i[0]===o[1]&&e.splice(n,2,[i[0],i[1]+o[1]])}return e}l.INSERT=1,l.DELETE=r,l.EQUAL=0,e.exports=l},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:i).supported=n,t.unsupported=i},function(e,t){var r=Object.prototype.hasOwnProperty,n="~";function i(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)r.call(e,t)&&i.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e,t){var r=n?n+e:e,i=this._events[r];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,a=i.length,s=new Array(a);o<a;o++)s[o]=i[o].fn;return s},a.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var f,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,r){var i=new o(t,r||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},a.prototype.once=function(e,t,r){var i=new o(t,r||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],i]:this._events[a].push(i):(this._events[a]=i,this._eventsCount++),this},a.prototype.removeListener=function(e,t,r,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0===--this._eventsCount?this._events=new i:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||(0===--this._eventsCount?this._events=new i:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||o&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new i:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=n,a.EventEmitter=a,void 0!==e&&(e.exports=a)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=v(r(3)),s=v(r(2)),l=v(r(0)),c=v(r(5)),u=v(r(10)),d=v(r(9)),f=r(36),h=r(37),p=v(r(13)),m=r(26),g=r(38),y=r(39),b=r(40);function v(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=(0,u.default)("quill:clipboard"),I="__ql-matcher",w=[[Node.TEXT_NODE,D],[Node.TEXT_NODE,L],["br",function(e,t){return O(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,q],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,function(e,t){var r={},n=e.style||{};return n.fontStyle&&"italic"===C(e).fontStyle&&(r.italic=!0),n.fontWeight&&(C(e).fontWeight.startsWith("bold")||parseInt(C(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=A(t,r)),parseFloat(n.textIndent||0)>0&&(t=(new s.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=l.default.query(e);if(null==r||"list-item"!==r.blotName||!O(t,"\n"))return t;for(var n=-1,i=e.parentNode;!i.classList.contains("ql-clipboard");)"list"===(l.default.query(i)||{}).blotName&&(n+=1),i=i.parentNode;return n<=0?t:t.compose((new s.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",T.bind(T,"bold")],["i",T.bind(T,"italic")],["style",function(){return new s.default}]],N=[f.AlignAttribute,g.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),_=[f.AlignStyle,h.BackgroundStyle,m.ColorStyle,g.DirectionStyle,y.FontStyle,b.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),k=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],w.concat(n.options.matchers).forEach(function(e){var t=i(e,2),o=t[0],a=t[1];(r.matchVisual||a!==M)&&n.addMatcher(o,a)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[p.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new s.default).insert(r,x({},p.default.blotName,t[p.default.blotName]))}var n=this.prepareMatching(),o=i(n,2),a=o[0],l=o[1],c=S(this.container,a,l);return O(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new s.default).retain(c.length()-1).delete(1))),j.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new s.default).retain(e).concat(n),r),this.quill.setSelection(e+n.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),n=(new s.default).retain(r.index),i=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){n=n.concat(t.convert()).delete(r.length),t.quill.updateContents(n,c.default.sources.USER),t.quill.setSelection(n.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=i,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach(function(n){var o=i(n,2),a=o[0],s=o[1];switch(a){case Node.TEXT_NODE:r.push(s);break;case Node.ELEMENT_NODE:t.push(s);break;default:[].forEach.call(e.container.querySelectorAll(a),function(e){e[I]=e[I]||[],e[I].push(s)})}}),[t,r]}}]),t}(d.default);function A(e,t,r){return"object"===(void 0===t?"undefined":n(t))?Object.keys(t).reduce(function(e,r){return A(e,r,t[r])},e):e.reduce(function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,a.default)({},x({},t,r),n.attributes))},new s.default)}function C(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function O(e,t){for(var r="",n=e.ops.length-1;n>=0&&r.length<t.length;--n){var i=e.ops[n];if("string"!=typeof i.insert)break;r=i.insert+r}return r.slice(-1*t.length)===t}function E(e){if(0===e.childNodes.length)return!1;var t=C(e);return["block","list-item"].indexOf(t.display)>-1}function S(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce(function(t,r){return r(e,t)},new s.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(n,i){var o=S(i,t,r);return i.nodeType===e.ELEMENT_NODE&&(o=t.reduce(function(e,t){return t(i,e)},o),o=(i[I]||[]).reduce(function(e,t){return t(i,e)},o)),n.concat(o)},new s.default):new s.default}function T(e,t,r){return A(r,e,!0)}function P(e,t){var r=l.default.Attributor.Attribute.keys(e),n=l.default.Attributor.Class.keys(e),i=l.default.Attributor.Style.keys(e),o={};return r.concat(n).concat(i).forEach(function(t){var r=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=r&&(o[r.attrName]=r.value(e),o[r.attrName])||(null==(r=N[t])||r.attrName!==t&&r.keyName!==t||(o[r.attrName]=r.value(e)||void 0),null==(r=_[t])||r.attrName!==t&&r.keyName!==t||(r=_[t],o[r.attrName]=r.value(e)||void 0))}),Object.keys(o).length>0&&(t=A(t,o)),t}function q(e,t){var r=l.default.query(e);if(null==r)return t;if(r.prototype instanceof l.default.Embed){var n={},i=r.value(e);null!=i&&(n[r.blotName]=i,t=(new s.default).insert(n,r.formats(e)))}else"function"==typeof r.formats&&(t=A(t,r.blotName,r.formats(e)));return t}function L(e,t){return O(t,"\n")||(E(e)||t.length()>0&&e.nextSibling&&E(e.nextSibling))&&t.insert("\n"),t}function M(e,t){if(E(e)&&null!=e.nextElementSibling&&!O(t,"\n\n")){var r=e.offsetHeight+parseFloat(C(e).marginTop)+parseFloat(C(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function D(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!C(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&E(e.parentNode)||null!=e.previousSibling&&E(e.previousSibling))&&(r=r.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&E(e.parentNode)||null!=e.nextSibling&&E(e.nextSibling))&&(r=r.replace(/\s+$/,n.bind(n,!1)))}return t.insert(r)}k.DEFAULTS={matchers:[],matchVisual:!0},t.default=k,t.matchAttributor=P,t.matchBlot=q,t.matchNewline=L,t.matchSpacing=M,t.matchText=D},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"optimize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="bold",s.tagName=["STRONG","B"],t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(2)),a=u(r(0)),s=u(r(5)),l=u(r(10)),c=u(r(9));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,l.default)("quill:toolbar"),h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i,o=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(o.options.container)){var a=document.createElement("div");m(a,o.options.container),e.container.parentNode.insertBefore(a,e.container),o.container=a}else"string"==typeof o.options.container?o.container=document.querySelector(o.options.container):o.container=o.options.container;return o.container instanceof HTMLElement?(o.container.classList.add("ql-toolbar"),o.controls=[],o.handlers={},Object.keys(o.options.handlers).forEach(function(e){o.addHandler(e,o.options.handlers[e])}),[].forEach.call(o.container.querySelectorAll("button, select"),function(e){o.attach(e)}),o.quill.on(s.default.events.EDITOR_CHANGE,function(e,t){e===s.default.events.SELECTION_CHANGE&&o.update(t)}),o.quill.on(s.default.events.SCROLL_OPTIMIZE,function(){var e=o.quill.selection.getRange(),t=n(e,1)[0];o.update(t)}),o):(i=f.error("Container required for toolbar",o.options),d(o,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void f.warn("ignoring attaching to disabled format",r,e);if(null==a.default.query(r))return void f.warn("ignoring attaching to nonexistent format",r,e)}var i="SELECT"===e.tagName?"change":"click";e.addEventListener(i,function(i){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),i.preventDefault();t.quill.focus();var u=t.quill.selection.getRange(),d=n(u,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,l);else if(a.default.query(r).prototype instanceof a.default.Embed){if(!(l=prompt("Enter "+r)))return;t.quill.updateContents((new o.default).retain(d.index).delete(d.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,l)),s.default.sources.USER)}else t.quill.format(r,l,s.default.sources.USER);t.update(d)}),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(r){var i=n(r,2),o=i[0],a=i[1];if("SELECT"===a.tagName){var s=void 0;if(null==e)s=null;else if(null==t[o])s=a.querySelector("option[selected]");else if(!Array.isArray(t[o])){var l=t[o];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),s=a.querySelector('option[value="'+l+'"]')}null==s?(a.value="",a.selectedIndex=-1):s.selected=!0}else if(null==e)a.classList.remove("ql-active");else if(a.hasAttribute("value")){var c=t[o]===a.getAttribute("value")||null!=t[o]&&t[o].toString()===a.getAttribute("value")||null==t[o]&&!a.getAttribute("value");a.classList.toggle("ql-active",c)}else a.classList.toggle("ql-active",null!=t[o])})}}]),t}(c.default);function p(e,t,r){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=r&&(n.value=r),e.appendChild(n)}function m(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(function(e){if("string"==typeof e)p(r,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?function(e,t,r){var n=document.createElement("select");n.classList.add("ql-"+t),r.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)}),e.appendChild(n)}(r,t,n):p(r,t,n)}}),e.appendChild(r)})}h.DEFAULTS={},h.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach(function(t){null!=a.default.query(t,a.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,s.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",s.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,s.default.sources.USER),this.quill.format("direction",e,s.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0);if("+1"===e||"-1"===e){var i="+1"===e?1:-1;"rtl"===r.direction&&(i*=-1),this.quill.format("indent",n+i,s.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,s.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,s.default.sources.USER):this.quill.format("list","unchecked",s.default.sources.USER):this.quill.format("list",e,s.default.sources.USER)}}},t.default=h,t.addControls=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(28),s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=r,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"buildItem",value:function(e){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var n=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=i:n.style.fill=i)}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(28),s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=r[e.getAttribute("data-value")||""]}),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"selectItem",value:function(e,r){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"}),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),o=0;if(i.right>n.right&&(o=n.right-i.right,this.root.style.left=t+o+"px"),i.left<n.left&&(o=n.left-i.left,this.root.style.left=t+o+"px"),i.bottom>n.bottom){var a=i.bottom-i.top,s=e.bottom-e.top+a;this.root.style.top=r-s+"px",this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){i=!0,o=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=h(r(3)),s=h(r(8)),l=r(43),c=h(l),u=h(r(27)),d=r(15),f=h(r(41));function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],b=function(e){function t(e,r){p(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=y);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-snow"),n}return g(t,e),o(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),f.default),this.tooltip=new v(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,r){e.handlers.link.call(e,!r.format.link)})}}]),t}(c.default);b.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var v=function(e){function t(e,r){p(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.preview=n.root.querySelector("a.ql-preview"),n}return g(t,e),o(t,[{key:"listen",value:function(){var e=this;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,s.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(s.default.events.SELECTION_CHANGE,function(t,r,i){if(null!=t){if(0===t.length&&i===s.default.sources.USER){var o=e.quill.scroll.descendant(u.default,t.index),a=n(o,2),l=a[0],c=a[1];if(null!=l){e.linkRange=new d.Range(t.index-c,l.length());var f=u.default.formats(l.domNode);return e.preview.textContent=f,e.preview.setAttribute("href",f),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);v.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=b},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=L(r(29)),i=r(36),o=r(38),a=r(64),s=L(r(65)),l=L(r(66)),c=r(67),u=L(c),d=r(37),f=r(26),h=r(39),p=r(40),m=L(r(56)),g=L(r(68)),y=L(r(27)),b=L(r(69)),v=L(r(70)),x=L(r(71)),j=L(r(72)),I=L(r(73)),w=r(13),N=L(w),_=L(r(74)),k=L(r(75)),A=L(r(57)),C=L(r(41)),O=L(r(28)),E=L(r(59)),S=L(r(60)),T=L(r(61)),P=L(r(108)),q=L(r(62));function L(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":i.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":p.SizeClass,"attributors/style/align":i.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":p.SizeStyle},!0),n.default.register({"formats/align":i.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":a.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":h.FontClass,"formats/size":p.SizeClass,"formats/blockquote":s.default,"formats/code-block":N.default,"formats/header":l.default,"formats/list":u.default,"formats/bold":m.default,"formats/code":w.Code,"formats/italic":g.default,"formats/link":y.default,"formats/script":b.default,"formats/strike":v.default,"formats/underline":x.default,"formats/image":j.default,"formats/video":I.default,"formats/list/item":c.ListItem,"modules/formula":_.default,"modules/syntax":k.default,"modules/toolbar":A.default,"themes/bubble":P.default,"themes/snow":q.default,"ui/icons":C.default,"ui/picker":O.default,"ui/icon-picker":S.default,"ui/color-picker":E.default,"ui/tooltip":T.default},!0),t.default=n.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var n=this.value(e)||0;r="+1"===r?n+1:n-1}return 0===r?(this.remove(e),!0):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(s.default.Attributor.Class),c=new l("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(4),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=i)&&n.__esModule?n:{default:n}).default);o.blotName="blockquote",o.tagName="blockquote",t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],t.default=a},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=l(r(0)),a=l(r(4)),s=l(r(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,[{key:"format",value:function(e,r){e!==h.blotName||r?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(o.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:i(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(a.default);f.blotName="list-item",f.tagName="LI";var h=function(e){function t(e){c(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=r.statics.formats(e),i=o.default.find(t.target);"checked"===n?i.format("list","unchecked"):"unchecked"===n&&i.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),r}return d(t,e),n(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof f)i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var n=null==r?this.length():r.offset(this),o=this.split(n);o.parent.insertBefore(e,o)}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=o.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(s.default);h.blotName="list",h.scope=o.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[f],t.ListItem=f,t.default=h},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(56),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=i)&&n.__esModule?n:{default:n}).default);o.blotName="italic",o.tagName=["EM","I"],t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="script",s.tagName=["SUB","SUP"],t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=i)&&n.__esModule?n:{default:n}).default);o.blotName="strike",o.tagName="S",t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=i)&&n.__esModule?n:{default:n}).default);o.blotName="underline",o.tagName="U",t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l=r(27),c=["alt","height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(s.default.Embed);u.blotName="image",u.tagName="IMG",t.default=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},a=r(4),s=r(27),l=(n=s)&&n.__esModule?n:{default:n},c=["height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(a.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",t.default=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=l(r(35)),a=l(r(5)),s=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,null,[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(o.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var h=function(e){function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return d(t,e),n(t,null,[{key:"register",value:function(){a.default.register(f,!0)}}]),t}(s.default);t.FormulaBlot=f,t.default=h},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},o=l(r(0)),a=l(r(5)),s=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(r(13)).default);f.className="ql-syntax";var h=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),p=function(e){function t(e,r){c(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var i=null;return n.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(i),i=setTimeout(function(){n.highlight(),i=null},n.options.interval)}),n.highlight(),n}return d(t,e),n(t,null,[{key:"register",value:function(){a.default.register(h,!0),a.default.register(f,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(a.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(f).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(a.default.sources.SILENT),null!=t&&this.quill.setSelection(t,a.default.sources.SILENT)}}}]),t}(s.default);p.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=f,t.CodeToken=h,t.default=p},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=d(r(3)),a=d(r(8)),s=r(43),l=d(s),c=r(15),u=d(r(41));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,r){f(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=m);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-bubble"),n}return p(t,e),i(t,[{key:"extendToolbar",value:function(e){this.tooltip=new y(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),t}(l.default);g.DEFAULTS=(0,o.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var y=function(e){function t(e,r){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.on(a.default.events.EDITOR_CHANGE,function(e,t,r,i){if(e===a.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&i===a.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var o=n.quill.getLines(t.index,t.length);if(1===o.length)n.position(n.quill.getBounds(t));else{var s=o[o.length-1],l=n.quill.getIndex(s),u=Math.min(s.length()-1,t.index+t.length-l),d=n.quill.getBounds(new c.Range(l,u));n.position(d)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()}),n}return p(t,e),i(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===r)return r;i.style.marginLeft=-1*r-i.offsetWidth/2+"px"}}]),t}(s.BaseTooltip);y.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=y,t.default=g},function(e,t,r){e.exports=r(63)}]).default},ji.exports=e());var e}const wi=G(function(){if(xi)return vi;xi=1;var e=vi&&vi.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),t=vi&&vi.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},r=vi&&vi.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},n=vi&&vi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=n(K()),o=n($()),a=n(function(){if(li)return si;li=1;var e=yi();return si=function(t,r){return e(t,r)}}()),s=n(Ii()),l=function(n){function l(e){var t=n.call(this,e)||this;t.dirtyProps=["modules","formats","bounds","theme","children"],t.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],t.state={generation:0},t.selection=null,t.onEditorChange=function(e,r,n,i){var o,a,s,l;"text-change"===e?null===(a=(o=t).onEditorChangeText)||void 0===a||a.call(o,t.editor.root.innerHTML,r,i,t.unprivilegedEditor):"selection-change"===e&&(null===(l=(s=t).onEditorChangeSelection)||void 0===l||l.call(s,r,i,t.unprivilegedEditor))};var r=t.isControlled()?e.value:e.defaultValue;return t.value=null!=r?r:"",t}return e(l,n),l.prototype.validateProps=function(e){var t;if(i.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(i.default.Children.count(e.children)&&"textarea"===(null===(t=i.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},l.prototype.shouldComponentUpdate=function(e,t){var n,i=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var o=this.getEditorContents(),s=null!=(n=e.value)?n:"";this.isEqualValue(s,o)||this.setEditorContents(this.editor,s)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),r(this.cleanProps,this.dirtyProps).some(function(t){return!a.default(e[t],i.props[t])})},l.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some(function(r){return!a.default(e[r],t.props[r])})},l.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},l.prototype.componentWillUnmount=function(){this.destroyEditor()},l.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var n=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var o=this.regenerationSnapshot,a=(n=o.delta,o.selection);delete this.regenerationSnapshot,this.instantiateEditor();var s=this.editor;s.setContents(n),c(function(){return r.setEditorSelection(s,a)})}},l.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},l.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},l.prototype.isControlled=function(){return"value"in this.props},l.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},l.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},l.prototype.createEditor=function(e,t){var r=new s.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},l.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},l.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},l.prototype.getEditorContents=function(){return this.value},l.prototype.getEditorSelection=function(){return this.selection},l.prototype.isDelta=function(e){return e&&e.ops},l.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?a.default(e.ops,t.ops):a.default(e,t)},l.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var n=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),c(function(){return r.setEditorSelection(e,n)})},l.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},l.prototype.setEditorTabIndex=function(e,t){var r,n;(null===(n=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===n?void 0:n.domNode)&&(e.scroll.domNode.tabIndex=t)},l.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},l.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},l.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=o.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},l.prototype.renderEditingArea=function(){var e=this,r=this.props,n=r.children,o=r.preserveWhitespace,a={key:this.state.generation,ref:function(t){e.editingArea=t}};return i.default.Children.count(n)?i.default.cloneElement(i.default.Children.only(n),a):o?i.default.createElement("pre",t({},a)):i.default.createElement("div",t({},a))},l.prototype.render=function(){var e;return i.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!=e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},l.prototype.onEditorChangeText=function(e,t,r,n){var i,o;if(this.editor){var a=this.isDelta(this.value)?n.getContents():n.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=a,null===(o=(i=this.props).onChange)||void 0===o||o.call(i,e,t,r,n))}},l.prototype.onEditorChangeSelection=function(e,t,r){var n,i,o,s,l,c;if(this.editor){var u=this.getEditorSelection(),d=!u&&e,f=u&&!e;a.default(e,u)||(this.selection=e,null===(i=(n=this.props).onChangeSelection)||void 0===i||i.call(n,e,t,r),d?null===(s=(o=this.props).onFocus)||void 0===s||s.call(o,e,t,r):f&&(null===(c=(l=this.props).onBlur)||void 0===c||c.call(l,u,t,r)))}},l.prototype.focus=function(){this.editor&&this.editor.focus()},l.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},l.displayName="React Quill",l.Quill=s.default,l.defaultProps={theme:"snow",modules:{},readOnly:!1},l}(i.default.Component);function c(e){Promise.resolve().then(e)}return vi=l}()),Ni=e=>{const t=new Date(e);return`${t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})} ${t.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}`},_i=()=>{const[r,n]=P.useState([]),[o,a]=P.useState(null),[l,c]=P.useState(!0),[u,d]=P.useState(!1),[f,h]=P.useState(""),[m,g]=P.useState("conversation"),[w,N]=P.useState({to:"",subject:"",content:""}),[_,k]=P.useState(null),[A,C]=P.useState("active"),O=P.useRef(null),E=P.useRef(null),{addToast:S}=L();P.useEffect(()=>{try{const e=localStorage.getItem(F),t=e?JSON.parse(e):U;n(t);const r=[...t].filter(e=>!e.isArchived).sort((e,t)=>new Date(t.lastMessageTimestamp).getTime()-new Date(e.lastMessageTimestamp).getTime());r.length>0&&a(r[0].id)}catch(e){n(U)}finally{c(!1)}},[]);const T=P.useMemo(()=>r.filter(e=>"active"===A?!e.isArchived:e.isArchived).sort((e,t)=>new Date(t.lastMessageTimestamp).getTime()-new Date(e.lastMessageTimestamp).getTime()),[r,A]),q=P.useMemo(()=>r.find(e=>e.id===o)||null,[r,o]),M=P.useCallback(e=>{g("conversation"),a(e);const t=r.map(t=>t.id===e?{...t,isRead:!0}:t);n(t),localStorage.setItem(F,JSON.stringify(t))},[r]),D=()=>{var e;return null==(e=E.current)?void 0:e.click()};if(P.useEffect(()=>{var e;null==(e=O.current)||e.scrollIntoView({behavior:"smooth"})},[null==q?void 0:q.messages]),l)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(s,{size:"large",className:"text-agria-green"})});const R={toolbar:[["bold","italic","underline"],["link"],[{list:"ordered"},{list:"bullet"}]]};return e.jsxs("div",{className:"flex h-[calc(100vh-8rem)] bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("input",{type:"file",ref:E,onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void S("La pièce jointe est trop lourde (max 5 Mo).","error");k(t)}},className:"hidden"}),e.jsxs("div",{className:"w-full md:w-1/3 border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Messagerie"}),e.jsxs("button",{onClick:()=>g("compose"),className:"bg-agria-green hover:bg-agria-green-dark text-white font-semibold py-1 px-3 rounded-lg text-sm flex items-center gap-1.5",title:"Nouveau message",children:[e.jsx(y,{className:"h-4 w-4"})," Nouveau"]})]}),e.jsxs("div",{className:"mt-4 flex border-b",children:[e.jsx("button",{onClick:()=>C("active"),className:"py-2 px-4 text-sm font-semibold "+("active"===A?"border-b-2 border-agria-green text-agria-green":"text-gray-500 hover:bg-gray-100"),children:"Boîte de réception"}),e.jsx("button",{onClick:()=>C("archived"),className:"py-2 px-4 text-sm font-semibold "+("archived"===A?"border-b-2 border-agria-green text-agria-green":"text-gray-500 hover:bg-gray-100"),children:"Archives"})]})]}),e.jsxs("ul",{className:"overflow-y-auto flex-1",children:[T.map(t=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>M(t.id),className:"w-full text-left p-4 border-b border-gray-200 hover:bg-gray-100 focus:outline-none "+(o===t.id&&"conversation"===m?"bg-agria-green-light":""),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"font-bold text-gray-800 "+(t.isRead,""),children:t.userName}),!t.isRead&&e.jsx("span",{className:"w-2.5 h-2.5 bg-agria-green rounded-full mt-1.5 flex-shrink-0"})]}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.subject}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:Ni(t.lastMessageTimestamp)})]})},t.id)),0===T.length&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:["Aucune conversation ","archived"===A?"archivée":"ici","."]})]})]}),e.jsx("div",{className:"hidden md:flex w-2/3 flex-col bg-gray-50",children:"compose"===m?e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"p-4 border-b border-gray-200 bg-white",children:e.jsx("h2",{className:"font-bold text-gray-800 text-lg",children:"Nouveau Message"})}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[e.jsx("input",{type:"email",placeholder:"À : email@exemple.com",value:w.to,onChange:e=>N(t=>({...t,to:e.target.value})),className:"w-full p-2 border-b-2",required:!0}),e.jsx("input",{type:"text",placeholder:"Sujet",value:w.subject,onChange:e=>N(t=>({...t,subject:e.target.value})),className:"w-full p-2 border-b-2 font-semibold",required:!0}),e.jsx(wi,{theme:"snow",value:w.content,onChange:e=>N(t=>({...t,content:e})),modules:R,className:"bg-white h-full"})]}),e.jsxs("footer",{className:"p-4 border-t bg-white flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:D,className:"text-gray-500 hover:text-agria-green p-2",title:"Joindre un fichier",children:e.jsx(b,{className:"h-6 w-6"})}),_&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2 bg-gray-100 p-1.5 rounded-md",children:[e.jsx("span",{className:"truncate max-w-[200px]",children:_.name}),e.jsx("button",{onClick:()=>k(null),children:e.jsx(t,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsxs("button",{onClick:async()=>{if(!w.to.trim()||!w.subject.trim()||!w.content.trim()||u)return void S("Veuillez remplir tous les champs.","error");d(!0),await new Promise(e=>setTimeout(e,1e3)),S(`(Simulation) Nouveau message envoyé à ${w.to}`,"success");const e={id:`conv-${Date.now()}`,userId:Date.now(),userName:w.to.split("@")[0],userEmail:w.to,subject:w.subject,isRead:!0,lastMessageTimestamp:(new Date).toISOString(),messages:[{id:`msg-${Date.now()}-admin`,sender:"admin",text:w.content,timestamp:(new Date).toISOString()}]},t=[e,...r];n(t),localStorage.setItem(F,JSON.stringify(t)),N({to:"",subject:"",content:""}),k(null),d(!1),g("conversation"),a(e.id)},className:"bg-agria-green text-white py-2 px-6 rounded-lg font-semibold flex items-center gap-2 disabled:opacity-50",disabled:u,children:[u?e.jsx(s,{size:"small"}):e.jsx(v,{className:"h-5 w-5"})," Envoyer"]})]})]}):q?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"p-4 border-b border-gray-200 bg-white flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-800",children:q.userName}),e.jsx("p",{className:"text-sm text-gray-500",children:q.subject})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>((e,t)=>{const r=localStorage.getItem(z),n=r?JSON.parse(r):[];if(n.includes(e))S(`${t} est déjà inscrit à la newsletter.`,"info");else{const r=[...n,e];localStorage.setItem(z,JSON.stringify(r)),S(`${t} a été ajouté à la liste de la newsletter.`,"success")}})(q.userEmail,q.userName),title:"Ajouter aux contacts newsletter",className:"p-2 text-gray-500 hover:bg-gray-200 rounded-full transition-colors",children:e.jsx(x,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>((e,t)=>{const i=r.map(r=>r.id===e?{...r,isArchived:t,isRead:!0}:r);n(i),localStorage.setItem(F,JSON.stringify(i)),o===e&&a(null),S(t?"Conversation archivée.":"Conversation désarchivée.","success")})(q.id,!q.isArchived),title:q.isArchived?"Désarchiver":"Archiver",className:"p-2 text-gray-500 hover:bg-gray-200 rounded-full transition-colors",children:q.isArchived?e.jsx(j,{className:"h-5 w-5"}):e.jsx(I,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>(e=>{if(!window.confirm("Êtes-vous sûr de vouloir supprimer cette conversation ? Cette action est irréversible."))return;const t=r.filter(t=>t.id!==e);if(n(t),localStorage.setItem(F,JSON.stringify(t)),o===e){const t=T.find(t=>t.id!==e);a(t?t.id:null)}S("Conversation supprimée.","success")})(q.id),title:"Supprimer",className:"p-2 text-red-500 hover:bg-red-100 rounded-full transition-colors",children:e.jsx(p,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[q.messages.map(t=>e.jsxs("div",{className:"flex items-end gap-3 "+("admin"===t.sender?"justify-end":"justify-start"),children:[e.jsx("div",{className:"rounded-2xl py-2 px-4 max-w-[80%] "+("admin"===t.sender?"bg-agria-green text-white rounded-br-none":"bg-white text-gray-800 rounded-bl-none shadow-sm"),style:{whiteSpace:"pre-wrap",overflowWrap:"break-word",...t.text.includes("<")&&t.text.includes(">")?{}:{whiteSpace:"pre-wrap"}},dangerouslySetInnerHTML:{__html:"admin"===t.sender?t.text.replace(/<p><br><\/p>/g,""):t.text}}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 pb-1",children:new Date(t.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]},t.id)),e.jsx("div",{ref:O})]}),e.jsxs("footer",{className:"p-4 border-t bg-white flex flex-col gap-2",children:[e.jsx(wi,{theme:"snow",value:f,onChange:h,modules:R,placeholder:"Écrire une réponse..."}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:D,className:"text-gray-500 hover:text-agria-green p-2",title:"Joindre un fichier",children:e.jsx(b,{className:"h-6 w-6"})}),_&&e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-2 bg-gray-100 p-1.5 rounded-md",children:[e.jsx("span",{className:"truncate max-w-[200px]",children:_.name}),e.jsx("button",{onClick:()=>k(null),children:e.jsx(t,{className:"h-4 w-4 text-red-500"})})]})]}),e.jsx("button",{onClick:async()=>{if(!f.trim()||!q||u)return;d(!0),await new Promise(e=>setTimeout(e,1e3)),S(`(Simulation) Réponse envoyée à ${q.userEmail}`,"success");const e={id:`msg-${Date.now()}`,sender:"admin",text:f,timestamp:(new Date).toISOString()},t=r.map(t=>t.id===o?{...t,messages:[...t.messages,e],lastMessageTimestamp:e.timestamp}:t);n(t),localStorage.setItem(F,JSON.stringify(t)),h(""),k(null),d(!1)},className:"bg-agria-green text-white p-2.5 rounded-full hover:bg-agria-green-dark disabled:bg-agria-green/50",disabled:!f.trim()||u,"aria-label":"Envoyer le message",children:u?e.jsx(s,{}):e.jsx(v,{className:"h-5 w-5"})})]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center text-center text-gray-400 p-4",children:[e.jsx(i,{className:"h-16 w-16 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Votre messagerie"}),e.jsx("p",{children:"Sélectionnez une conversation ou créez un nouveau message."})]})})]})},ki="agria-scheduled-newsletters",Ai=({subject:r,setSubject:n,editorContent:i,setEditorContent:o,attachment:a,setAttachment:l,onSendSuccess:c})=>{const[u,d]=P.useState([]),[f,h]=P.useState([]),[m,g]=P.useState(""),[y,v]=P.useState(!1),{addToast:x}=L(),j=P.useCallback(()=>{try{const e=localStorage.getItem(z);if(e){const t=JSON.parse(e);d(t),h(t)}}catch(e){x("Erreur lors du chargement des abonnés.","error")}},[x]);P.useEffect(()=>{j()},[j]);const I=P.useMemo(()=>u.filter(e=>e.toLowerCase().includes(m.toLowerCase())),[u,m]),w=I.length>0&&f.length===I.length;return e.jsxs("div",{className:"grid lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-gray-50 p-4 rounded-lg border",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:["Abonnés (",f.length," / ",I.length," sél.)"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx("label",{htmlFor:"file-upload",className:"w-full text-center cursor-pointer bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold py-2 px-4 rounded-md transition-colors",children:"Importer (CSV, TXT)"}),e.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(!r)return;const n=new FileReader;n.onload=e=>{var t;const r=(null==(t=e.target)?void 0:t.result).split(/[\n,;]+/).map(e=>e.trim()).filter(e=>/^\S+@\S+\.\S+$/.test(e));if(0===r.length)return void x("Aucune adresse email valide trouvée dans le fichier.","error");const n=[...u],i=r.filter(e=>!n.includes(e)),o=[...n,...i];d(o),h(e=>[...new Set([...e,...i])]),localStorage.setItem(z,JSON.stringify(o));const a=`${i.length} nouvel(s) abonné(s) importé(s). ${r.length-i.length} doublon(s) ignoré(s).`;x(a,"success")},n.readAsText(r),e.target.value=""},accept:".csv,.txt"})]}),e.jsx("input",{type:"search",placeholder:"Rechercher un email...",value:m,onChange:e=>g(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-agria-green mb-2"}),e.jsxs("div",{className:"flex items-center p-2 border-b border-t border-gray-200",children:[e.jsx("input",{type:"checkbox",id:"select-all",className:"h-4 w-4 rounded border-gray-300 text-agria-green focus:ring-agria-green",checked:w,onChange:e=>{e.target.checked?h(I):h([])},disabled:0===I.length}),e.jsx("label",{htmlFor:"select-all",className:"ml-2 text-sm font-medium text-gray-700",children:"Tout sélectionner / désélectionner"})]}),e.jsx("ul",{className:"h-80 overflow-y-auto space-y-1 mt-2 pr-2",children:I.length>0?I.map(t=>e.jsxs("li",{className:"flex items-center p-2 bg-white rounded-md shadow-sm",children:[e.jsx("input",{type:"checkbox",id:`cb-${t}`,className:"h-4 w-4 rounded border-gray-300 text-agria-green focus:ring-agria-green",checked:f.includes(t),onChange:e=>((e,t)=>{h(t?t=>[...t,e]:t=>t.filter(t=>t!==e))})(t,e.target.checked)}),e.jsx("label",{htmlFor:`cb-${t}`,className:"ml-2 text-sm text-gray-700 truncate flex-1",children:t}),e.jsx("button",{onClick:()=>(e=>{if(window.confirm(`Êtes-vous sûr de vouloir supprimer ${e} de la liste des abonnés ?`)){const t=u.filter(t=>t!==e);d(t),h(t=>t.filter(t=>t!==e)),localStorage.setItem(z,JSON.stringify(t)),x(`${e} a été supprimé.`,"success")}})(t),className:"text-red-500 hover:text-red-700 p-1 ml-2",title:"Supprimer l'abonné",children:e.jsx(p,{className:"h-4 w-4"})})]},t)):e.jsx("li",{className:"text-center text-gray-500 text-sm py-8",children:"Aucun abonné trouvé."})})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=i.replace(/<(.|\n)*?>/g,"").trim();if(r.trim()&&t)if(0!==f.length){v(!0);try{a&&(a.name,a.type,await(n=a,new Promise((e,t)=>{const r=new FileReader;r.readAsDataURL(n),r.onload=()=>e(r.result),r.onerror=e=>t(e)})));await new Promise(e=>setTimeout(e,2e3)),x(`(Simulation) Newsletter envoyée avec succès à ${f.length} abonné(s) !`,"success"),c()}catch(o){x("Une erreur est survenue lors de l'envoi. Veuillez consulter la console pour plus de détails.","error")}finally{v(!1)}var n}else x("Veuillez sélectionner au moins un destinataire.","error");else x("Veuillez remplir le sujet et le contenu de la newsletter.","error")},className:"bg-gray-50 p-4 rounded-lg border h-full flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Composer une newsletter"}),e.jsxs("div",{className:"space-y-4 flex-grow flex flex-col",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-gray-700",children:"Sujet"}),e.jsx("input",{type:"text",name:"subject",id:"subject",required:!0,value:r,onChange:e=>n(e.target.value),className:"mt-1 block w-full input-style"})]}),e.jsxs("div",{className:"flex-grow flex flex-col min-h-[350px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenu"}),e.jsx("div",{className:"bg-white rounded-md overflow-hidden flex-grow flex flex-col",children:e.jsx(wi,{theme:"snow",value:i,onChange:o,modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],["link","image"],[{color:[]},{background:[]}],["clean"]]},className:"quill-editor"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pièce jointe (Optionnel)"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsxs("label",{htmlFor:"attachment-upload",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-agria-green",children:[e.jsx("span",{children:"Choisir un fichier"}),e.jsx("input",{id:"attachment-upload",name:"attachment-upload",type:"file",className:"sr-only",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>5242880)return void x("La pièce jointe est trop lourde (max 5MB).","error");l(t)}else l(null)}})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{title:a.name,children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx("span",{className:"truncate max-w-xs",children:a.name}),e.jsx("button",{type:"button",onClick:()=>l(null),className:"text-red-500 hover:text-red-700",children:e.jsx(t,{className:"h-4 w-4"})})]})]})]}),e.jsxs("button",{type:"submit",className:"w-full bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-2 mt-auto disabled:opacity-50 disabled:cursor-not-allowed",disabled:y||0===f.length||!r.trim()||!i.replace(/<(.|\n)*?>/g,"").trim(),children:[y?e.jsx(s,{}):e.jsx(_,{}),y?"Envoi en cours...":"Envoyer aux abonnés"]})]})]})})]})},Ci=()=>{const t=({title:t,value:r,icon:n})=>e.jsx("div",{className:"bg-white p-4 rounded-lg shadow border",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-agria-green/10 text-agria-green-dark rounded-full mr-4",children:n}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:r})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(t,{title:"Campagnes envoyées",value:"3",icon:e.jsx(_,{})}),e.jsx(t,{title:"Taux de réussite moyen",value:"98%",icon:e.jsx(w,{})}),e.jsx(t,{title:"Taux d'ouverture moyen",value:"65%",icon:e.jsx(i,{})}),e.jsx(t,{title:"Abonnés actifs",value:"352",icon:e.jsx(o,{})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Historique des campagnes"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sujet"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date d'envoi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Destinataires"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Taux d'ouverture"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:[{id:1,subject:"Menu de la semaine du 14/10",sentDate:"2024-10-14",recipients:350,successRate:98,openRate:62},{id:2,subject:"Nouveautés d'automne",sentDate:"2024-10-07",recipients:345,successRate:99,openRate:58},{id:3,subject:"Soirée spéciale le 25 Octobre",sentDate:"2024-10-01",recipients:340,successRate:97,openRate:75}].map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:t.subject}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.sentDate).toLocaleDateString("fr-FR")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.recipients}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mr-2",children:e.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${t.openRate}%`}})}),e.jsxs("span",{className:"text-sm text-gray-500",children:[t.openRate,"%"]})]})})]},t.id))})]})})]})]})},Oi=({onClose:t,onSchedule:r,selectedDatesCount:n})=>{const[i,o]=P.useState("09:00");return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:t,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm transform",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:["Planifier pour ",n," jour(s)"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Choisissez l'heure d'envoi pour les dates sélectionnées."}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-700",children:"Heure d'envoi"}),e.jsx("input",{type:"time",id:"time",value:i,onChange:e=>o(e.target.value),required:!0,className:"mt-1 block w-full input-style"})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex flex-row-reverse rounded-b-lg",children:[e.jsx("button",{type:"button",onClick:()=>{r(i)},className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-agria-green text-base font-medium text-white hover:bg-agria-green-dark sm:ml-3",children:"Planifier"}),e.jsx("button",{type:"button",onClick:t,className:"mt-3 w-full sm:w-auto sm:mt-0 inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50",children:"Annuler"})]})]})})},Ei=({scheduledItems:t,setScheduledItems:r,currentSubject:n,currentContent:i,currentAttachment:o,onScheduleSuccess:a})=>{const[s,l]=P.useState(new Date),[c,u]=P.useState(!1),[d,f]=P.useState([]),{addToast:h}=L(),m=s.getMonth(),g=s.getFullYear(),y=new Date(g,m,1).getDay(),v=new Date(g,m+1,0).getDate(),x=e=>{l(new Date(g,m+e,1)),f([])},j=d.length>0&&""!==n.trim()&&""!==i.replace(/<(.|\n)*?>/g,"").trim();return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>x(-1),className:"p-2 rounded-full hover:bg-gray-100",children:"<"}),e.jsx("h3",{className:"text-xl font-bold text-capitalize",children:s.toLocaleString("fr-FR",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>x(1),className:"p-2 rounded-full hover:bg-gray-100",children:">"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 text-center font-bold text-gray-500 mb-2",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(t=>e.jsx("div",{children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:[...Array((y+6)%7).fill(null),...Array.from({length:v},(e,t)=>t+1)].map((n,i)=>{if(!n)return e.jsx("div",{className:"border rounded-lg bg-gray-50"},`blank-${i}`);const o=new Date(g,m,n),a=o.toISOString().split("T")[0],s=o.toDateString()===(new Date).toDateString(),l=d.includes(a),c=t.filter(e=>new Date(e.date).toDateString()===o.toDateString()),u="border p-1 sm:p-2 rounded-lg h-24 sm:h-32 flex flex-col cursor-pointer transition-colors "+(l?"bg-blue-200 border-blue-400":"hover:bg-agria-green/10");return e.jsxs("div",{onClick:()=>(e=>{const t=new Date(g,m,e).toISOString().split("T")[0];f(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])})(n),className:u,children:[e.jsx("span",{className:"text-xs sm:text-base font-semibold "+(s?"text-white bg-agria-green rounded-full w-6 h-6 flex items-center justify-center":""),children:n}),e.jsx("div",{className:"mt-1 space-y-1 overflow-y-auto text-xs",children:c.map(t=>e.jsxs("div",{title:`${t.subject} à ${t.time}`,className:"relative group p-1 bg-green-100 text-green-800 rounded text-left",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"font-semibold truncate text-xs",children:t.subject}),t.attachment&&e.jsx("span",{className:"flex-shrink-0 ml-auto",title:t.attachment.name,children:e.jsx(b,{className:"h-3 w-3 text-gray-600"})})]}),e.jsx("button",{onClick:e=>{var n;e.stopPropagation(),n=t.id,window.confirm("Êtes-vous sûr de vouloir supprimer cette planification ?")&&(r(e=>e.filter(e=>e.id!==n)),h("Planification supprimée.","success"))},className:"absolute -top-1 -right-1 p-0.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(p,{className:"h-3 w-3"})})]},t.id))})]},n)})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("button",{onClick:()=>{const e=i.replace(/<(.|\n)*?>/g,"").trim();n.trim()&&e?u(!0):h("Veuillez d'abord composer une newsletter avec un sujet et un contenu.","error")},disabled:!j,className:"bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Planifier pour la sélection (",d.length,")"]})}),c&&e.jsx(Oi,{onClose:()=>u(!1),onSchedule:e=>{const s=d.map(t=>({id:`${t}-${Math.random()}`,date:new Date(t).toISOString(),time:e,subject:n,content:i,attachment:o?{name:o.name,type:o.type}:void 0})),l=[...t];s.forEach(e=>{const t=new Date(e.date).toDateString(),r=l.findIndex(e=>new Date(e.date).toDateString()===t);r>-1?l[r]=e:l.push(e)}),r(l),h(`${d.length} newsletter(s) planifiée(s) pour ${e}.`,"success"),a(),u(!1),f([])},selectedDatesCount:d.length})]})},Si=()=>{const[t,r]=P.useState("management"),{addToast:n}=L(),[o,a]=P.useState(""),[s,l]=P.useState(""),[c,u]=P.useState(null),[d,f]=P.useState([]);P.useEffect(()=>{try{const e=localStorage.getItem(ki);e&&f(JSON.parse(e))}catch(e){}},[]),P.useEffect(()=>{localStorage.setItem(ki,JSON.stringify(d))},[d]);const h=()=>{a(""),l(""),u(null)},p=[{id:"management",name:"Gestion de Newsletter",icon:i},{id:"stats",name:"Statistiques d'envois",icon:w},{id:"scheduling",name:"Planification",icon:N}];return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700 mb-4",children:"Gestion de la Newsletter"}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:p.map(n=>e.jsxs("button",{onClick:()=>r(n.id),className:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 "+(t===n.id?"border-agria-green text-agria-green-dark":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(n.icon,{className:"h-5 w-5"}),n.name]},n.id))})}),e.jsxs("div",{className:"mt-6",children:["management"===t&&e.jsx(Ai,{subject:o,setSubject:a,editorContent:s,setEditorContent:l,attachment:c,setAttachment:u,onSendSuccess:h}),"stats"===t&&e.jsx(Ci,{}),"scheduling"===t&&e.jsx(Ei,{scheduledItems:d,setScheduledItems:f,currentSubject:o,currentContent:s,currentAttachment:c,onScheduleSuccess:h})]}),e.jsx("style",{children:"\n                .input-style {\n                    padding: 0.5rem 0.75rem; border: 1px solid #D1D5DB; border-radius: 0.375rem; box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n                }\n                .input-style:focus {\n                    outline: 2px solid transparent; outline-offset: 2px; border-color: #009A58; box-shadow: 0 0 0 2px #009A58;\n                }\n                .quill-editor {\n                    display: flex; flex-direction: column; height: 100%;\n                }\n                .quill-editor .ql-container.ql-snow {\n                    flex-grow: 1; overflow-y: auto; border-bottom-left-radius: 0.375rem; border-bottom-right-radius: 0.375rem;\n                }\n                 .quill-editor .ql-toolbar.ql-snow {\n                    border-top-left-radius: 0.375rem; border-top-right-radius: 0.375rem;\n                }\n                .text-capitalize::first-letter {\n                    text-transform: uppercase;\n                }\n             "})]})},Ti=()=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700",children:"Gestion Vente à Emporter"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"Cette fonctionnalité a été désactivée car aucun produit n'est actuellement proposé. Pour la réactiver, veuillez recréer des produits ou contacter le support technique."})]}),Pi="agria-restaurant-page-content",qi=({isOpen:r,onClose:n,onSave:i,currentImage:o})=>{const[a,s]=P.useState("upload"),[l,c]=P.useState(""),[u,d]=P.useState(o||null),{addToast:p}=L();P.useEffect(()=>{d(o||null),o&&!o.startsWith("data:")?(c(o),s("url")):(c(""),s("upload"))},[r,o]);return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[9999] flex justify-center items-center p-4",onClick:n,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Gérer l'image"}),e.jsx("button",{onClick:n,children:e.jsx(t,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex border-b mb-4",children:[e.jsxs("button",{onClick:()=>s("upload"),className:"py-2 px-4 flex items-center gap-2 "+("upload"===a?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"),children:[e.jsx(f,{className:"h-5 w-5"})," Importer"]}),e.jsxs("button",{onClick:()=>s("url"),className:"py-2 px-4 flex items-center gap-2 "+("url"===a?"border-b-2 border-blue-600 text-blue-600":"text-gray-500"),children:[e.jsx(h,{className:"h-5 w-5"})," Lien URL"]})]}),"upload"===a?e.jsx("input",{type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0];if(t.size>2097152)return void p("L'image est trop lourde (max 2 Mo).","error");const r=new FileReader;r.onloadend=()=>d(r.result),r.readAsDataURL(t)}},accept:"image/*",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}):e.jsx("input",{type:"url",value:l,onChange:e=>c(e.target.value),onBlur:()=>{l.match(/\.(jpeg|jpg|gif|png|webp)$/)&&d(l)},placeholder:"https://exemple.com/image.jpg",className:"w-full p-2 border border-gray-300 rounded"}),e.jsx("div",{className:"mt-4 w-full h-40 bg-gray-100 rounded border flex items-center justify-center",children:u?e.jsx("img",{src:u,alt:"Aperçu",className:"max-h-full max-w-full object-contain"}):e.jsx("span",{className:"text-gray-400",children:"Aperçu"})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 flex justify-between rounded-b-lg",children:[e.jsx("button",{onClick:()=>{i(null),n()},className:"text-red-600 hover:text-red-800 font-semibold",children:"Supprimer l'image"}),e.jsxs("div",{children:[e.jsx("button",{onClick:n,className:"py-2 px-4 rounded font-semibold mr-2",children:"Annuler"}),e.jsx("button",{onClick:()=>{i("url"===a?l:u),n()},className:"bg-blue-600 text-white py-2 px-4 rounded font-semibold hover:bg-blue-700",children:"Valider"})]})]})]})}):null},Li=({section:t,onUpdate:r})=>{const[n,i]=P.useState(null),o=(e,n,i)=>{const o=[...t.paragraphs];o[e]={...o[e],[n]:i},r({paragraphs:o})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"label-style",children:"Titre de la section"}),e.jsx("input",{type:"text",value:t.title,onChange:e=>r({title:e.target.value}),className:"input-style w-full"}),e.jsx("div",{className:"space-y-4",children:t.paragraphs.map((n,a)=>e.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg border",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:["Paragraphe ",a+1]}),e.jsx("textarea",{value:n.text,onChange:e=>o(a,"text",e.target.value),rows:6,className:"input-style w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Image (Optionnel)"}),e.jsx("button",{type:"button",onClick:()=>i({isOpen:!0,paragraphIndex:a}),className:"w-full h-24 border-2 border-dashed rounded-md flex items-center justify-center text-gray-400 hover:bg-gray-200 hover:border-gray-500 transition-colors bg-white",children:n.image?e.jsx("img",{src:n.image,alt:"Aperçu",className:"w-full h-full object-cover rounded-md"}):e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"mx-auto h-8 w-8"}),e.jsx("span",{className:"text-xs mt-1 block",children:"Ajouter/Modifier"})]})}),n.image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Position"}),e.jsxs("select",{value:n.imagePosition||"left",onChange:e=>o(a,"imagePosition",e.target.value),className:"input-style w-full text-sm",children:[e.jsx("option",{value:"left",children:"Gauche"}),e.jsx("option",{value:"right",children:"Droite"})]})]})]})]}),e.jsx("div",{className:"text-right mt-2",children:e.jsx("button",{onClick:()=>(e=>{r({paragraphs:t.paragraphs.filter((t,r)=>r!==e)})})(a),className:"btn-icon-danger",children:e.jsx(p,{})})})]},n.id))}),e.jsxs("button",{onClick:()=>{const e={id:`p-${Date.now()}`,text:"",imagePosition:"left"};r({paragraphs:[...t.paragraphs,e]})},className:"btn-secondary text-sm",children:[e.jsx(m,{})," Ajouter un paragraphe"]}),e.jsx(qi,{isOpen:!!(null==n?void 0:n.isOpen),onClose:()=>i(null),onSave:e=>{if(!n)return;const o=[...t.paragraphs];o[n.paragraphIndex]={...o[n.paragraphIndex],image:e||void 0},r({paragraphs:o}),i(null)},currentImage:n?t.paragraphs[n.paragraphIndex].image:void 0})]})},Mi=({section:t,onUpdate:r})=>{const[n,i]=P.useState(null),o=(e,n,i)=>{const o=[...t.cards];o[e]={...o[e],[n]:i},r({cards:o})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"label-style",children:"Titre de la section"}),e.jsx("input",{type:"text",value:t.title,onChange:e=>r({title:e.target.value}),className:"input-style w-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.cards.map((n,a)=>e.jsxs("div",{className:"bg-gray-100 p-3 rounded-lg border space-y-3",children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-500",children:["Carte ",a+1]}),e.jsx("input",{type:"text",value:n.title,onChange:e=>o(a,"title",e.target.value),className:"input-style w-full",placeholder:"Titre"}),e.jsx("textarea",{value:n.description,onChange:e=>o(a,"description",e.target.value),rows:3,className:"input-style w-full",placeholder:"Description"}),e.jsx("button",{type:"button",onClick:()=>i({isOpen:!0,cardIndex:a}),className:"w-full h-24 border-2 border-dashed rounded-md flex items-center justify-center text-gray-400 hover:bg-gray-200 hover:border-gray-500 transition-colors bg-white",children:n.image?e.jsx("img",{src:n.image,alt:"Aperçu",className:"w-full h-full object-cover rounded-md"}):e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"mx-auto h-8 w-8"}),e.jsx("span",{className:"text-xs mt-1 block",children:"Ajouter/Modifier"})]})}),e.jsx("div",{className:"text-right",children:e.jsx("button",{onClick:()=>(e=>{r({cards:t.cards.filter((t,r)=>r!==e)})})(a),className:"btn-icon-danger",children:e.jsx(p,{})})})]},n.id))}),e.jsxs("button",{onClick:()=>{const e={id:`v-${Date.now()}`,title:"",description:""};r({cards:[...t.cards,e]})},className:"btn-secondary text-sm",children:[e.jsx(m,{})," Ajouter une carte"]}),e.jsx(qi,{isOpen:!!(null==n?void 0:n.isOpen),onClose:()=>i(null),onSave:e=>{if(!n)return;const o=[...t.cards];o[n.cardIndex]={...o[n.cardIndex],image:e||void 0},r({cards:o}),i(null)},currentImage:n?t.cards[n.cardIndex].image:void 0})]})},Di=({section:t,onUpdate:r})=>{const[n,i]=P.useState(!1),o=(e,t)=>r({[e]:t});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"label-style",children:"Titre (interne, non affiché)"}),e.jsx("input",{type:"text",value:t.title,onChange:e=>o("title",e.target.value),className:"input-style w-full"}),e.jsx("button",{type:"button",onClick:()=>i(!0),className:"w-full h-40 border-2 border-dashed rounded-md flex items-center justify-center text-gray-400 hover:bg-gray-100 hover:border-gray-500 transition-colors bg-white",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:"Aperçu",className:"max-w-full max-h-full object-contain"}):e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"mx-auto h-10 w-10"}),e.jsx("span",{className:"text-sm mt-1 block",children:"Choisir une image"})]})}),e.jsx("label",{className:"label-style",children:"Légende (Optionnel)"}),e.jsx("input",{type:"text",value:t.caption,onChange:e=>o("caption",e.target.value),className:"input-style w-full"}),e.jsx(qi,{isOpen:n,onClose:()=>i(!1),onSave:e=>r({imageUrl:e||""}),currentImage:t.imageUrl})]})},Ri=({section:t,onUpdate:r})=>{const n=(e,t)=>r({[e]:t});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"label-style",children:"Titre (interne, non affiché)"}),e.jsx("input",{type:"text",value:t.title,onChange:e=>n("title",e.target.value),className:"input-style w-full"}),e.jsx("label",{className:"label-style",children:"URL de la vidéo (ex: YouTube)"}),e.jsx("input",{type:"url",value:t.videoUrl,onChange:e=>n("videoUrl",e.target.value),className:"input-style w-full"}),e.jsx("div",{className:"w-full aspect-video bg-gray-200 rounded-md overflow-hidden flex items-center justify-center",children:t.videoUrl?e.jsx("iframe",{src:(i=t.videoUrl,i.includes("youtube.com/watch?v=")?i.replace("watch?v=","embed/"):i),title:"Aperçu vidéo",className:"w-full h-full",frameBorder:"0",allowFullScreen:!0}):e.jsx(C,{className:"h-12 w-12 text-gray-400"})}),e.jsx("label",{className:"label-style",children:"Légende (Optionnel)"}),e.jsx("input",{type:"text",value:t.caption,onChange:e=>n("caption",e.target.value),className:"input-style w-full"})]});var i},Bi=()=>{const[t,r]=P.useState([]),[n,i]=P.useState(!0),[o,a]=P.useState(null),{addToast:s}=L();P.useEffect(()=>{try{const e=localStorage.getItem(Pi);if(e){let t=JSON.parse(e);if(t&&!Array.isArray(t)){t=[{id:"concept-migrated",type:"concept",title:"Notre concept",paragraphs:[{id:"p1",text:t.conceptParagraph1||""},{id:"p2",text:t.conceptParagraph2||""}].filter(e=>e.text)},{id:"values-migrated",type:"values",title:"Nos valeurs fondamentales",cards:(t.values||[]).map((e,t)=>({id:`v-migrated-${t}`,title:e.title,description:e.description}))}]}r(t)}else r([{id:"default-concept",type:"concept",title:"Notre concept",paragraphs:[{id:"p1",text:"Chez Agria Rouen, nous croyons...",imagePosition:"left"}]},{id:"default-values",type:"values",title:"Nos valeurs",cards:H.map((e,t)=>({id:`v-${t}`,title:e.title,description:e.description}))}])}catch(e){}finally{i(!1)}},[]);const l=e=>{const n={id:`${e}-${Date.now()}`,title:`Nouvelle section ${e}`};let i;switch(e){case"concept":i={...n,type:"concept",paragraphs:[]};break;case"values":i={...n,type:"values",cards:[]};break;case"image":i={...n,type:"image",imageUrl:"",caption:""};break;case"video":i={...n,type:"video",videoUrl:"",caption:""};break;default:throw new Error(`Invalid section type: ${e}`)}r(e=>[...e,i]),a(t.length)},c=(e,n)=>{const i="up"===n?e-1:e+1;if(i<0||i>=t.length)return;const o=[...t];[o[e],o[i]]=[o[i],o[e]],r(o)},u={concept:Li,values:Mi,image:Di,video:Ri},f={concept:e.jsx(d,{className:"h-6 w-6"}),values:e.jsx(A,{className:"h-6 w-6"}),image:e.jsx(g,{className:"h-6 w-6"}),video:e.jsx(C,{className:"h-6 w-6"})},h=({section:n,index:i})=>{const s=o===i,l=u[n.type];return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-gray-500",children:f[n.type]}),e.jsx("h3",{className:"font-bold text-gray-800",children:n.title||`Section ${n.type}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(i,"up"),disabled:0===i,className:"btn-icon",children:e.jsx(O,{})}),e.jsx("button",{onClick:()=>c(i,"down"),disabled:i===t.length-1,className:"btn-icon",children:e.jsx(E,{})}),e.jsx("button",{onClick:()=>a(s?null:i),className:"btn-secondary text-sm",children:s?"Fermer":"Modifier"}),e.jsx("button",{onClick:()=>(e=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette section ?")&&r(t=>t.filter((t,r)=>r!==e))})(i),className:"btn-icon-danger",children:e.jsx(p,{})})]})]}),s&&e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsx(l,{section:n,onUpdate:e=>((e,n)=>{const i=[...t];i[e]={...i[e],...n},r(i)})(i,e)})})]})};return e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700",children:'Gestion de la Page "Mon Restaurant"'}),e.jsx("button",{onClick:()=>{localStorage.setItem(Pi,JSON.stringify(t)),s("Page 'Mon Restaurant' sauvegardée avec succès !","success"),a(null)},className:"btn-primary",children:"Sauvegarder la Page"})]}),n?e.jsx("p",{children:"Chargement..."}):e.jsx("div",{className:"space-y-4",children:t.map((t,r)=>e.jsx(h,{section:t,index:r},t.id))}),e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Ajouter une section"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("button",{onClick:()=>l("concept"),className:"btn-secondary flex items-center gap-2",children:[e.jsx(d,{})," Concept"]}),e.jsxs("button",{onClick:()=>l("values"),className:"btn-secondary flex items-center gap-2",children:[e.jsx(A,{})," Valeurs"]}),e.jsxs("button",{onClick:()=>l("image"),className:"btn-secondary flex items-center gap-2",children:[e.jsx(g,{})," Image"]}),e.jsxs("button",{onClick:()=>l("video"),className:"btn-secondary flex items-center gap-2",children:[e.jsx(C,{})," Vidéo"]})]})]}),e.jsx("style",{children:"\n                .label-style { display: block; margin-bottom: 0.25rem; font-size: 0.875rem; font-weight: 500; color: #4B5563; }\n                .input-style { display: block; width: 100%; padding: 0.5rem; border: 1px solid #D1D5DB; border-radius: 0.375rem; }\n                .btn-primary { padding: 0.5rem 1.5rem; background-color: #009A58; color: white; font-weight: bold; border-radius: 0.375rem; }\n                .btn-secondary { padding: 0.5rem 1rem; background-color: #fff; border: 1px solid #D1D5DB; font-weight: 500; border-radius: 0.375rem; }\n                .btn-icon { padding: 0.5rem; border-radius: 9999px; &:not(:disabled):hover { background-color: #F3F4F6; } &:disabled { opacity: 0.4; } }\n                .btn-icon-danger { padding: 0.5rem; border-radius: 9999px; color: #DC2626; &:hover { background-color: #FEE2E2; } }\n            "})]})},Fi="agria-slider-slides",Ui="agria-slider-settings",zi={titleText:"Nos Services",titleColor:"#1f2937",titleFont:"'Playfair Display', serif",titleSize:"2rem",subtitleText:"Découvrez ce que nous pouvons vous offrir.",subtitleColor:"#6b7280",subtitleFont:"'Montserrat', sans-serif",subtitleSize:"1rem"},Hi=()=>{const[t,r]=P.useState([]),[n,i]=P.useState(null),[o,a]=P.useState(zi),{addToast:s}=L();P.useEffect(()=>{try{const e=localStorage.getItem(Fi);e&&r(JSON.parse(e));const t=localStorage.getItem(Ui);t&&a(e=>({...e,...JSON.parse(t)}))}catch(e){}},[]);const l=e=>{r(e),localStorage.setItem(Fi,JSON.stringify(e))},c=(e,r)=>{if("up"===r&&0===e||"down"===r&&e===t.length-1)return;const n=[...t],i=n.splice(e,1)[0],o="up"===r?e-1:e+1;n.splice(o,0,i),l(n)},u=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-700",children:"Gestion du Slider"}),e.jsxs("button",{onClick:()=>{i({id:`slide-${Date.now()}`,type:"image",source:"",title:"Nouveau Titre",description:"Description de la diapositive",titleColor:"#FFFFFF",descriptionColor:"#FFFFFF",titleFont:"'Playfair Display', serif",overlayColor:"rgba(0, 0, 0, 0.4)"})},className:"bg-agria-green hover:bg-agria-green-dark text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(m,{})," Ajouter une diapositive"]})]}),n&&e.jsx(Vi,{slide:n,onSave:e=>{let r;r=t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?e:t):[...t,e],l(r),i(null),s("Diapositive sauvegardée !","success")},onCancel:()=>i(null)}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-2 border-t pt-6",children:"Diapositives Actuelles"}),0===t.length?e.jsx("p",{className:"text-center text-gray-500 py-10",children:"Aucune diapositive. Ajoutez-en une pour commencer."}):t.map((r,n)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-24 h-16 bg-gray-200 rounded-md overflow-hidden flex-shrink-0",children:["image"===r.type&&e.jsx("img",{src:r.source,alt:r.title,className:"w-full h-full object-cover"}),"video"===r.type&&e.jsx("video",{src:r.source,className:"w-full h-full object-cover"}),"html"===r.type&&e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(S,{})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-800",children:r.title}),e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-sm",children:r.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(n,"up"),disabled:0===n,className:"p-2 disabled:opacity-30",children:e.jsx(O,{})}),e.jsx("button",{onClick:()=>c(n,"down"),disabled:n===t.length-1,className:"p-2 disabled:opacity-30",children:e.jsx(E,{})}),e.jsx("button",{onClick:()=>i(r),className:"text-blue-600 hover:underline",children:"Modifier"}),e.jsx("button",{onClick:()=>{return e=r.id,void(window.confirm("Supprimer cette diapositive ?")&&(l(t.filter(t=>t.id!==e)),s("Diapositive supprimée.","success")));var e},className:"text-red-600 hover:underline",children:"Supprimer"})]})]},r.id))]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4 border-t pt-6",children:"Paramètres de la section"}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Texte du titre"}),e.jsx("input",{type:"text",name:"titleText",value:o.titleText,onChange:u,className:"input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Taille de police du titre"}),e.jsx("input",{type:"text",name:"titleSize",value:o.titleSize,onChange:u,className:"input-style",placeholder:"ex: 2rem"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Couleur du titre"}),e.jsx("input",{type:"color",name:"titleColor",value:o.titleColor,onChange:u,className:"input-color-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Police du titre"}),e.jsxs("select",{name:"titleFont",value:o.titleFont,onChange:u,className:"input-style",children:[e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display"}),e.jsx("option",{value:"'Montserrat', sans-serif",children:"Montserrat"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 pt-4 border-t mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Texte du sous-titre"}),e.jsx("input",{type:"text",name:"subtitleText",value:o.subtitleText,onChange:u,className:"input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Taille de police du sous-titre"}),e.jsx("input",{type:"text",name:"subtitleSize",value:o.subtitleSize,onChange:u,className:"input-style",placeholder:"ex: 1rem"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Couleur du sous-titre"}),e.jsx("input",{type:"color",name:"subtitleColor",value:o.subtitleColor,onChange:u,className:"input-color-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Police du sous-titre"}),e.jsxs("select",{name:"subtitleFont",value:o.subtitleFont,onChange:u,className:"input-style",children:[e.jsx("option",{value:"'Montserrat', sans-serif",children:"Montserrat"}),e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"})]})]})]})]}),e.jsx("button",{onClick:()=>{localStorage.setItem(Ui,JSON.stringify(o)),s("Paramètres de la section sauvegardés !","success")},className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Sauvegarder les paramètres"})]}),e.jsx("style",{children:"\n                .label-style { display: block; margin-bottom: 0.25rem; font-size: 0.875rem; font-weight: 500; color: #4B5563; }\n                .input-style { display: block; width: 100%; padding: 0.5rem; border: 1px solid #D1D5DB; border-radius: 0.375rem; }\n                .input-color-style { width: 100%; height: 2.5rem; padding: 0.25rem; border: 1px solid #D1D5DB; border-radius: 0.375rem; }\n            "})]})},Vi=({slide:t,onSave:r,onCancel:n})=>{var i,o;const[a,s]=P.useState(t),{addToast:l}=L(),c=e=>{const{name:t,value:r}=e.target;s(e=>({...e,[t]:r}))};return e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border-2 border-blue-200 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-4",children:(null==(i=t.id)?void 0:i.startsWith("slide-"))?"Nouvelle diapositive":"Modifier la diapositive"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(a)},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Titre"}),e.jsx("input",{type:"text",name:"title",value:a.title,onChange:c,className:"input-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Description"}),e.jsx("input",{type:"text",name:"description",value:a.description,onChange:c,className:"input-style"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Type de contenu"}),e.jsxs("select",{name:"type",value:a.type,onChange:c,className:"input-style",children:[e.jsx("option",{value:"image",children:"Image"}),e.jsx("option",{value:"video",children:"Vidéo"}),e.jsx("option",{value:"html",children:"HTML"})]})]}),"html"===a.type?e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Contenu HTML"}),e.jsx("textarea",{name:"source",value:a.source,onChange:c,rows:5,className:"input-style font-mono"})]}):e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Source (URL ou charger un fichier)"}),e.jsx("input",{type:"text",name:"source",value:(null==(o=a.source)?void 0:o.startsWith("data:"))?"":a.source,onChange:c,className:"input-style",placeholder:"https://... ou charger un fichier"}),e.jsx("input",{type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0],r="video"===a.type?52428800:5242880;if(t.size>r)return void l(`Fichier trop volumineux (max ${r/1024/1024}MB)`,"error");const n=new FileReader;n.onloadend=()=>{s(e=>({...e,source:n.result}))},n.readAsDataURL(t)}},accept:"image"===a.type?"image/*":"video/*",className:"mt-2 text-sm"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 pt-4 border-t",children:"Personnalisation"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Couleur du titre"}),e.jsx("input",{type:"color",name:"titleColor",value:a.titleColor,onChange:c,className:"input-color-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Couleur description"}),e.jsx("input",{type:"color",name:"descriptionColor",value:a.descriptionColor,onChange:c,className:"input-color-style"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Couleur de la superposition"}),e.jsx("input",{type:"text",name:"overlayColor",value:a.overlayColor,onChange:c,className:"input-style",placeholder:"rgba(0,0,0,0.4)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-style",children:"Police du titre"}),e.jsxs("select",{name:"titleFont",value:a.titleFont,onChange:c,className:"input-style",children:[e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display"}),e.jsx("option",{value:"'Montserrat', sans-serif",children:"Montserrat"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Sauvegarder"})]})]}),e.jsx("style",{children:"\n                .btn-primary { padding: 0.5rem 1.5rem; background-color: #009A58; color: white; font-weight: bold; border-radius: 0.375rem; }\n                .btn-secondary { padding: 0.5rem 1.5rem; background-color: #E5E7EB; font-weight: bold; border-radius: 0.375rem; }\n            "})]})},Ki=({onLogout:t})=>{const[r,n]=P.useState(window.location.hash||"#admin/dashboard"),[i,o]=P.useState(!1);P.useEffect(()=>{const e=()=>{n(window.location.hash)};return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)},[]);return e.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[e.jsx(Z,{activeRoute:r,onLogout:t,isOpen:i,onClose:()=>o(!1)}),i&&e.jsx("div",{onClick:()=>o(!1),className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"lg:hidden bg-white shadow-sm p-4 flex items-center",children:[e.jsx("button",{onClick:()=>o(!0),className:"text-gray-600",children:e.jsx(T,{})}),e.jsx("h1",{className:"ml-4 font-bold text-lg",children:"Admin"})]}),e.jsx("main",{className:"flex-1 p-6 lg:p-10 overflow-y-auto",children:r.startsWith("#admin/restaurant")?e.jsx(Bi,{}):r.startsWith("#admin/messagerie")?e.jsx(_i,{}):r.startsWith("#admin/newsletter")?e.jsx(Si,{}):r.startsWith("#admin/menu")?e.jsx(re,{}):r.startsWith("#admin/users")?e.jsx(ae,{}):r.startsWith("#admin/info")?e.jsx(me,{}):r.startsWith("#admin/traiteur")?e.jsx(be,{}):r.startsWith("#admin/settings")?e.jsx(fe,{}):r.startsWith("#admin/slider")?e.jsx(Hi,{}):r.startsWith("#admin/takeaway")?e.jsx(Ti,{}):e.jsx(X,{})})]})]})},$i=()=>{const{logout:t}=q();P.useEffect(()=>{"#admin"!==window.location.hash&&"#admin/"!==window.location.hash||(window.location.hash="#admin/dashboard")},[]);return e.jsx(J,{children:e.jsx(Ki,{onLogout:()=>{t(),window.location.hash="#"}})})};export{$i as default};
